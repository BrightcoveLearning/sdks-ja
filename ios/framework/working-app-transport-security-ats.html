---
title: 'アプリトランスポートセキュリティ（ATS）の操作' 
description: このトピックでは、App TransportSecurityの操作方法を学習します。
parent: Framework 
grandparent: iOS開発
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概要</h2>

<p>iOS 9 のリリースで、Apple は<a href="https://developer.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/"> App Transport Security (ATS) </a>と呼ばれる新しい機能を導入し、アプリと Web サービス間の安全な接続を強化します。近い将来、アプリレビュープロセスの一環として ATS 例外の妥当な正当性を提示しない限り、App Store 内のすべてのアプリで ATS を有効にする必要があります。</p>

<aside class="bcls-aside bcls-aside--warning">間もなく、すべてのAppStoreアプリでAppTransportSecurityを使用する必要があります。App Store アプリの ATS を無効にすることはできなくなります。
<ul>
	<li>詳細については、<a href="https://techcrunch.com/2016/06/14/apple-will-require-https-connections-for-ios-apps-by-the-end-of-2016/"> 2016年末までにAppleがiOSアプリのHTTPS接続を要求するドキュメントを参照してください</a>。</li>
	<li><a href="https://developer.apple.com/news/#article-12212016b">Appleのニュースとアップデートに従って</a>、ATSがいつ必要になるかを調べてください。</li>
</ul>
</aside>

<p>ATS 制限は、iOS 9.0 以降を対象とするアプリケーションに適用されます。App Store 内の既存のアプリは影響を受けませんが、新しいアプリを公開したり、既存のアプリを更新したりするときは ATS 制限を適用する必要があります。</p>

<p>Brightcoveのエコシステムは ATS 制限をサポートしています。ほとんどの場合、ATS を有効にしてアプリを構築する必要があります。安全でないURLに接続する必要がある場合は、AppleのApp Storeのレビューに正当性とともにATS例外を送信できます。</p>

<p>次のいずれかを選択します。</p>

<ul>
	<li><a href="#Building_Apps_with_ATS_Enabled">ATS を有効にしたアプリケーションの構築</a></li>
	<li><a href="#Using_ATS_exceptions">ATS 例外を使用する</a></li>
</ul>

<p>最後の手段として、ATS 要件を無効にすることができます。このオプションはすぐになくなることに注意してください。</p>

<ul>
	<li><a href="#Disabling_ATS_requirements">ATS 要件の無効化</a></li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Building_Apps_with_ATS_Enabled">ATS を有効にしたアプリケーションの構築</h2>

<p>アプリと Web サービス間で HTTPS を介した安全な接続を使用する場合は、アプリの App Transport セキュリティを有効にできます。</p>

<aside class="bcls-aside bcls-aside--tip">ATSで定義されている安全な接続には、TLS v1.2、転送秘密、およびSHA-2証明書が含まれます。完全な仕様については、を参照してください。<a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW35"> ATSを使用して接続するための要件</a>資料。</aside>

<p>ATS を有効にしてアプリを構築するには、次の操作を行います。</p>

<ol class="bcls-tasklist">
	<li>安全な通信のために CDN を有効にします。
	<ul>
		<li>
		<p>Video Cloud のお客様は（自社の CDN または指定の CDN のいずれを使用している場合でも）、Brightcoveのアカウントマネージャに連絡して、アカウントが HTTPS 経由で配信されるように設定されていることを確認する必要があります。</p>
		</li>
		<li>
		<p>リモートアセットを使用している場合は、CDN を適切に設定する必要があります。</p>
		</li>
	</ul>
	</li>
	<li>
	<p>セキュリティで保護された通信を使用してメディアコンテンツを配信します。これには、動画、広告、キャプション、ポスター画像、サムネイル、その他のサードパーティの API 接続が含まれます。</p>

	<ul>
		<li>
		<p>ビデオクラウドのお客様:Playback API を使用して、各アセットの安全なプロトコルを取得します。</p>

		<aside class="bcls-aside bcls-aside--tip">デフォルトでは、iOS用のBrightcove Native SDKは、ソース選択ポリシーを使用してHTTPS over HTTPソースを選択するため、ATSを有効にしてアプリを構築できます。</aside>
		</li>
		<li>
		<p>Brightcoveプレーヤーのお客様:メディアコンテンツが HTTPS 経由で配信されていることを確認します。</p>
		</li>
	</ul>
	</li>
	<!-- <li><p>In your Xcode projects, update the source selection policy to use HTTPS.</p>
						<p>Here is a code example:</p>
            <pre class="line-numbers" data-start="1"><code class="language-swift" translate="No">- (void)setup
{
  BCOVPlayerSDKManager *manager = [BCOVPlayerSDKManager sharedManager];

  <span class="bcls-highlight">BCOVBasicSessionProviderOptions *options = [[BCOVBasicSessionProviderOptions alloc] init];
  options.sourceSelectionPolicy = [BCOVBasicSourceSelectionPolicy sourceSelectionHLSWithScheme:kBCOVSourceURLSchemeHTTPS];
  id&lt;BCOVPlaybackSessionProvider&gt; provider = [manager createBasicSessionProviderWithOptions:options];
  _playbackController = [manager createPlaybackControllerWithSessionProvider:provider viewStrategy:[manager defaultControlsViewStrategy]];
}</span></code></pre>

						<p>For details, see the <strong>Source Selection</strong> section of the <a href="https://github.com/brightcove/brightcove-player-sdk-ios#source-selection-hls-mp4-httphttps">Brightcove Player SDK for iOS</a> notes.</p>
            </li> -->
</ol>
</section>

<section class="bcls-section">
<h2 id="Using_ATS_exceptions">ATS 例外を使用する</h2>

<p>アプリと Web サービスの間でセキュリティで保護されていない接続を使用する必要がある場合は、ATS 例外を使用して試すことができます。ATS 要件の理由は、アプリを使用するときにユーザーに高いレベルのセキュリティを確保するためです。したがって、ATS例外を掘り下げる前に、アプリが安全な接続を使用できないことを確認してください。</p>

<p>ATS 要件を回避するために使用できる特定のキーがあります。これらの例外は、追加のApp Storeレビューを引き起こし、合理的な正当性を提示する必要があります。詳細については、「<a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW59"> ATS の App Store レビュー</a>」ドキュメントを参照してください。</p>

<p>すでに暗号化されているコンテンツの例外の正当性を得ることができるかもしれないことに注意してください（つまり。FairPlay) ですが、可能であれば HTTPS を使用するのがベストプラクティスです。</p>
</section>

<section class="bcls-section">
<h2 id="Disabling_ATS_requirements">ATS 要件の無効化</h2>

<p>iOS 9 SDK 以降を対象とするアプリケーションを構築する場合、ATS を無効にすることができます。アプリで ATS 要件を無効にするには、次の手順に従います。</p>

<aside class="bcls-aside bcls-aside--warning">間もなく、すべてのAppStoreアプリでAppTransportSecurityを使用する必要があります。App Store アプリの ATS を無効にすることはできなくなります。
<ul>
	<li>詳細については、<a href="https://techcrunch.com/2016/06/14/apple-will-require-https-connections-for-ios-apps-by-the-end-of-2016/"> 2016年末までにAppleがiOSアプリのHTTPS接続を要求するドキュメントを参照してください</a>。</li>
	<li><a href="https://developer.apple.com/news/#article-12212016b">Appleのニュースとアップデートに従って</a>、ATSがいつ必要になるかを調べてください。</li>
</ul>
</aside>

<ol class="bcls-tasklist-restart">
	<li>
	<p>Xcodeで、<strong> info.plistファイルを右クリックし</strong>、<strong>ソースコードとして開きます</strong>。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Source code info.plist" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/guides/ats/source-code.png" />
	<figcaption class="bcls-caption--image">ソースコード info.plist</figcaption>
	</figure>
	</li>
	<li>
	<p>次のコードをコピーします。</p>

	<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;</code></pre>
	</li>
	<li>
	<p><strong>Info.plist </strong>ファイルで、<code translate="No">&lt;/dict&gt;</code>終了タグの前に、上からコードを貼り付けます。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Allow arbitrary loads" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/guides/ats/allow-loads.png" />
	<figcaption class="bcls-caption--image">任意の負荷を許可</figcaption>
	</figure>
	</li>
	<li>
	<p>Xcodeでは、を開くと<strong>Info.plist</strong>としてファイル<strong>プロパティリスト</strong>、plistディクショナリにこのエントリが表示されます。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="ATS disabled" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/guides/ats/ats-disabled.png" />
	<figcaption class="bcls-caption--image">ATS 無効</figcaption>
	</figure>
	</li>
</ol>
<!-- <p><code data-gist-id="d27e3a0e5343da1eb6dcf6e7af2ca58b" data-gist-line="24-28" data-gist-hide-footer="true"></code></p> -->

<p>ATSを無効にしても既存のHTTPS接続は変わりません。iOSがセキュリティ要件をhttp通信に追加することを防ぐのみです。</p>
<!-- <p>You may also try whitelisting certain domains to disable ATS requirements. For details, see the <a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33">NSAppTransportSecurity</a> document.</p> --></section>

<section class="bcls-section">
<h2 id="Additional_Resources">その他のリソース</h2>

<ul>
	<li>アップル開発者フォーラム:<a href="https://forums.developer.apple.com/thread/48979">アプリトランスポートセキュリティが必要 2017 年 1 月</a></li>
	<li>アップル開発者フォーラム:<a href="https://forums.developer.apple.com/message/15705#15705">アプリトランスポートセキュリティ更新プログラム</a></li>
</ul>
</section>
</article>