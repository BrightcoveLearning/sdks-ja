---
title: 'ステップバイステップ：Swiftを使用したシンプルなTVビデオアプリ' 
description: このトピックでは、Apple TV または Xcode シミュレータで再生可能な tvOS 用 Brightcove Player SDK を使用して、簡単な動画再生アプリを構築する方法について説明します。Swiftプログラミング言語を使用してビルドします。
parent: Basics 
grandparent: tvOS Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概要</h2>

<p class="video-cloud-only">この例では、<a href="https://apis.support.brightcove.com/playback/getting-started/overview-playback-api.html"> Brightcove 再生 API </a>から返された動画を再生します。これは、Video Cloud ライブラリからコンテンツを取得するための最新かつ推奨される API です。</p>

<p class="player-only">この例では、ビデオファイルの内部配列からビデオを再生します。</p>

<p class="video-cloud-only">再生 API を使用するには、ポリシーキーが必要です。ポリシーキーに慣れていない場合は、「<a href="https://apis.support.brightcove.com/policy/getting-started/overview-policy-api.html">ポリシー API の概要</a>」を参照してください。</p>

<!-- <aside class="bcls-aside bcls-aside--tip">This example is written in Swift, but you can also experiment with Objective-C. See the <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/OUX/BasicOUXtvOSPlayer/objc">Obj-C version of the Basic tvOS player with the Once UX plugin</a> sample.</aside> -->
</section>

<section class="bcls-section">
<h2 id="Get_started">はじめに</h2>

<p class="player-only">以下の手順に従って、tvOS 用 Brightcove Player SDK を使用するアプリプロジェクトのセットアップについて理解を深めます。次の各について、完全なコードを表示できます。</p>

<ol class="player-only">
	<li><a href="#appdelegate">AppDelegate </a></li>
	<li><a href="#viewControllerPerform">ViewController </a></li>
</ol>

<div class="video-cloud-only">
<p>このサンプルを試すには、次の 2 つの方法があります。</p>

<h3>サンプルをダウンロードする</h3>

<p>実験のためにXcodeプロジェクト全体をダウンロードしてください。</p>

<ol>
	<li><a href="https://github.com/BrightcoveOS/ios-player-samples">iOS 用ネイティブ SDK サンプルをローカルシステムに複製またはダウンロードします</a>。</li>
	<li><a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/AppleTV/swift">Player、AppleTV、Swift </a>サンプルアプリに移動します。</li>
	<li><code translate="No">pod install</code>コマンドを実行します。</li>
	<li>新しく作成したワークスペースを開いて実行します。</li>
</ol>

<p>詳細については、<a href="/getting-started/running-sample-apps-native-sdk-ios.html">ネイティブ SDK for iOS/tvOS 用のサンプルアプリの実行を参照してください</a>。</p>

<h3>このガイドの手順に従ってアプリを構築する</h3>

<p>以下の手順に従って、tvOS 用 Brightcove Player SDK を使用するアプリプロジェクトのセットアップについて理解を深めます。次の各について、完全なコードを表示できます。</p>

<ol>
	<li><a href="#appdelegate">AppDelegate </a></li>
	<li><a href="#viewController">ViewController </a></li>
</ol>
</div>
</section>

<section class="bcls-section">
<h2 id="Create_the_project">プロジェクトを作成する</h2>

<p>Xcodeでプロジェクトを設定します。次に、プロジェクトへの依存関係とともに SDK を追加します。</p>

<h3>Xcodeプロジェクトをセットアップする</h3>

<p>アプリ用の新しい Xcode プロジェクトを作成します。</p>

<ol class="bcls-tasklist">
	<li>
	<p>Xcodeで新しいtvOSプロジェクトの作成を開始します。[ <strong>新しい Xcode プロジェクトを作成する</strong> ] を選択します。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Create project" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/quick-start/quick-start-welcome.png" />
	<figcaption class="bcls-caption--image">プロジェクトを作成</figcaption>
	</figure>
	</li>
	<li>
	<p>テンプレートの tvOS <strong>シングルビューアプリケーションを選択し</strong>、[ <strong>次へ</strong> ] を選択します。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Choose project template" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/tvos/getting-started/quick-start-swift/quick-start-choose-project-template.png" />
	<figcaption class="bcls-caption--image">プロジェクトテンプレートを選択</figcaption>
	</figure>
	</li>
	<li>
	<p>プロジェクト情報を次のように設定します。</p>

	<ul>
		<li><strong>製品名:</strong>シンプルなビデオ再生</li>
		<li><strong>チーム:</strong>なし
		<p>[チーム] フィールドはオプションです。App Storeでアプリを配布する場合は、Apple開発者プログラムを通じて所属するチームを選択する必要があります。コード署名にはチーム名が必要です。この例では、[なし] を選択します。</p>
		</li>
		<li><strong>組織名:</strong>あなたの会社名</li>
		<li><strong>組織識別子：</strong> com.example-company<br />
		これにより、製品名がアプリストアで一意になります。</li>
		<li><strong>言語:</strong>スウィフト</li>
	</ul>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Add project information" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/tvos/getting-started/quick-start-swift/project-options.png" />
	<figcaption class="bcls-caption--image">プロジェクト情報の追加</figcaption>
	</figure>
	</li>
	<li>
	<p>プロジェクトを保存する場所を選択し、プロジェクトを作成します。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Save the project" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/tvos/getting-started/quick-start-swift/workspace.png" />
	<figcaption class="bcls-caption--image">プロジェクトを保存する</figcaption>
	</figure>
	</li>
	<li>今すぐプロジェクトを閉じてください（はい、閉じてください。これは重要です！）</li>
</ol>

<h3 id="dependencies">SDK とその依存関係をプロジェクトに追加する</h3>

<p>SDK とその依存関係をプロジェクトに追加する最も簡単な方法は、CocoaPods を使用することです。</p>

<p>CocoaPods は、プロジェクトにライブラリを追加する依存関係マネージャです。必須ではありませんが、インストールが簡単になります。CocoaPods をインストールするには、<a href="//cocoapods.org"> CocoaPods </a>サイトの手順を参照してください。</p>

<aside class="bcls-aside bcls-aside--warning">
<ul>
	<li>CocoaPods バージョン 1.0 以降が必要です。</li>
	<li>既存のXcodeプロジェクトで CocoaPods（<code translate="No">pod</code>ツール）を使用すると、プロジェクトファイルが変更されます。これを行う前にバックアップを作成することをお勧めします。</li>
</ul>
</aside><aside class="bcls-aside bcls-aside--tip">を簡単に作成および更新するには<code translate="No">Podfile</code>、内部で次の手順を実行できます<a href="https://cocoapods.org/app">CocoaPodsアプリ</a>。</aside>

<ol class="bcls-tasklist">
	<li>
	<p>プロジェクトフォルダに、<strong> Podfile </strong> (ファイル拡張子なし) というプレーンテキストファイルを作成します。</p>
	</li>
	<li>
	<p>テキストエディタを使用して、Podfile に次のコード行を追加して保存します。このコードは次のことを行います。</p>

	<ul>
		<li>1 行目:GitHub ソースを定義します。</li>
		<li>3行目:静的ライブラリの代わりにフレームワークを使用するように Pod を設定します。</li>
		<li>5行目:tvOS プラットフォームのバージョンを定義します。</li>
		<li>
		<p>7～9行目:Brightcoveのネイティブプレーヤー SDK をインストールします。</p>

		<ol>
			<li><a href="/ios/basics/overview-brightcove-player-sdk-ios.html#Download_the_SDK">iOS 用 Brightcove ネイティブ SDK の概要ドキュメントから、現在のネイティブ SDK </a>バージョンを取得します。</li>
			<li><code translate="No"> '6.3.11'</code>値を現在の SDK バージョン番号に置き換えます。</li>
			<li>
			<p>依存関係の管理の詳細については、「<a href="https://cocoacasts.com/how-to-manage-dependencies-with-cocoapods/"> CocoaPods を使用して依存関係を管理する方法</a>」を参照してください。</p>
			</li>
		</ol>
		</li>
	</ul>

	<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">source 'https://github.com/brightcove/BrightcoveSpecs.git'

use_frameworks!

platform :tvos, '11.0' # (or whatever version you want)

target 'Simple-Video-Playback' do
	pod 'Brightcove-Player-Core/dynamic', '6.3.11'
end</code></pre>

	<aside class="bcls-aside bcls-aside--tip">注意:
	<ul>
		<li><code translate="No">target</code>このプロパティは、CocoaPods バージョン 1.0 以降に使用されます。</li>
		<li>UI コントロールをサポートするには、Brightcoveのネイティブ SDK コア v6.3+ をターゲットにする必要があります。</li>
	</ul>
	</aside>
	</li>
	<!--							<p class="text-warning">ReactiveCocoa will be added to your project as a part of the Brightcove SDK.</p>-->
	<li>
	<p>ターミナルセッションを開き、<strong>シンプルビデオ再生の Xcode </strong>プロジェクトフォルダーに移動します。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Terminal session" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/quick-start/quick-start-terminal.png" />
	<figcaption class="bcls-caption--image">ターミナルセッション</figcaption>
	</figure>
	</li>
	<li>
	<p>ターミナルセッションで、コマンド</p>

	<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">pod install</code></pre>

	<p>を選択し、<strong> Return </strong>キーを押して実行します。ターミナルに、Brightcove Player SDK がプロジェクトに追加されたことを示す一連のメッセージが表示されます。</p>
	</li>
	<li>
	<p><strong>最後の行に注意してください</strong>、これは重要です—この時点から、を開く必要があります <em>Simple-Video-Playback.xcworkspace</em> Xcodeのファイル、<strong>いいえ</strong> NS <em>Simple-Video-Playback.xcodeproj</em> ファイル。<code translate="No">pod install</code>このコマンドにより、<code translate="No">.xcworkspace</code>プロジェクト用にこのファイルが作成されます。</p>
	</li>
</ol>

<aside class="bcls-aside bcls-aside--tip">CocoaPodsを使用したくない場合は、次のことができます<a href="https://github.com/brightcove/brightcove-player-sdk-ios/releases">SDKの最新バージョンをダウンロードします</a>手動でプロジェクトに追加します。</aside>
</section>

<section class="bcls-section">
<h2 id="Code_the_video_app">動画アプリをコーディングする</h2>

<p>簡単なビデオ再生アプリのコードを作成します。</p>

<h3 id="appdelegate">アプリのオーディオ動作を設定する</h3>

<p>オーディオセッションは、アプリレベルでオーディオの動作を処理します。<a href="https://developer.apple.com/documentation/avfoundation/avaudiosession">AvaudioSessionクラスの詳細については</a>、こちらをご覧ください。</p>

<aside class="bcls-aside bcls-aside--tip">いくつかのオーディオセッションのカテゴリと設定から選択して、アプリのオーディオ動作をカスタマイズできます。<a href="https://developer.apple.com/library/archive/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategoriesandModes/AudioSessionCategoriesandModes.html#//apple_ref/doc/uid/TP40007875-CH10">最適なオーディオセッションカテゴリを選択してください</a>あなたのアプリのために。</aside>

<p>このサンプルでは、<a href="https://developer.apple.com/documentation/avfoundation/avaudiosession/category/1616509-playback">再生カテゴリを使用します</a>。これにより、画面がロックされ、Ring/Silent スイッチがサイレントに設定されている場合でも、オーディオが再生されます。動画を再生しているので、<a href="https://developer.apple.com/documentation/avfoundation/avaudiosession/mode/1616623-movieplayback"> MoviePlayback </a>モードを使用します。それを簡単に保つために、我々は、アプリケーションデリゲートにこのコードを配置します。</p>

<ol class="bcls-tasklist">
	<li>
	<p>プロジェクトで、アプリケーションデリゲートファイル ( <strong> AppDelegate.swift </strong> ) を開きます。</p>
	</li>
	<li>
	<p><code translate="No">didFinishLaunchingWithOptions</code>関数で、オーディオセッションカテゴリを設定するコードを追加します。<code translate="No">AVFoundation</code>フレームワークをインポートしてください。</p>

	<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">//
//  AppDelegate.swift
//  Simple-Video-Playback
//
//  Copyright © 2018 Brightcove. All rights reserved.
//

import UIKit
<span class="bcls-highlight">import AVFoundation</span>

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

  var window: UIWindow?

  func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
    // Override point for customization after application launch.
<span class="bcls-highlight">        var categoryError :NSError?;
    var success: Bool;
    do {
      try AVAudioSession.sharedInstance().setCategory(.playback, mode: .moviePlayback, options: .duckOthers)
      success = true;
    } catch let error as NSError {
      categoryError = error;
      success = false;
    }

    if !success {
      print("AppDelegate Debug - Error setting AVAudioSession category.  Because of this, there may be no sound. \(categoryError!)");
    }</span>

    return true
  }

  func applicationWillResignActive(_ application: UIApplication) {
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
  }

  func applicationDidEnterBackground(_ application: UIApplication) {
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
  }

  func applicationWillEnterForeground(_ application: UIApplication) {
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
  }

  func applicationDidBecomeActive(_ application: UIApplication) {
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
  }

  func applicationWillTerminate(_ application: UIApplication) {
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
  }

}</code></pre>
	</li>
</ol>

<h3>ビューコントローラを構築する</h3>

<p class="video-cloud-only">View コントローラクラスを更新して、Brightcove再生 API から動画を再生します。</p>

<p class="player-only">View Controller クラスを更新して、リモート URL からビデオを再生します。</p>

<ol class="bcls-tasklist">
	<li>
	<p>プロジェクトで、ビューコントローラーファイル ( <strong> ViewController.swift </strong> ) を開きます。</p>
	</li>
</ol>

<div class="video-cloud-only">
<h4>ネイティブ SDK のインポート</h4>

<p>iOS 用 Brightcove ネイティブプレーヤー SDK は Obj-C で書かれていますが、フレームワークモジュールを Swift プロジェクトにインポートするだけです。</p>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">import</code>既存のディレクティブの下に以下を追加して、Brightcove ネイティブプレーヤー SDK をインポートします。</p>

	<pre class="line-numbers" data-start="9">
<code class="language-swift" translate="No">import BrightcovePlayerSDK</code></pre>
	</li>
</ol>

<h4>あなたの価値でプロジェクトをカスタマイズする</h4>

<p>Video Cloud アカウントにアクセスするための値を追加します。</p>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">import</code>ディレクティブの下に、次の値を追加します。</p>

	<ul>
		<li>
		<p>12行目です:Brightcove再生 API ポリシーキーを定義します。この例では、<a href="https://apis.support.brightcove.com/playback/getting-started/overview-playback-api.html"> Brightcove 再生 API </a>から返された動画を再生します。これは、Video Cloud ライブラリからコンテンツを取得するための最新かつ推奨される API です。ポリシーキーに慣れていない場合は、「<a href="https://apis.support.brightcove.com/policy/getting-started/overview-policy-api.html">ポリシー API の概要</a>」を参照してください。</p>
		</li>
		<li>13行目:ビデオクラウドアカウント ID を定義します</li>
		<li>
		<p>14行目:ビデオクラウドビデオ ID を定義します</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="11">
<code class="language-swift" translate="No">fileprivate struct playbackConfig {
  static let policyKey = "<span class="bcls-input">your policy key</span>"
  static let accountID = "<span class="bcls-input">your account id</span>"
  static let videoID = "<span class="bcls-input">your video id</span>"
}</code></pre>
	</li>
</ol>

<h4>ビュー変数を作成する</h4>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">ViewController</code>クラスで、ビューの変数を追加します。</p>

	<pre class="line-numbers" data-start="17">
<code class="language-swift" translate="No">class ViewController: UIViewController {
  @IBOutlet weak var videoContainerView: UIView!</code></pre>
	</li>
</ol>

<h4>プレイバックサービスの作成</h4>

<ol class="bcls-tasklist">
	<li>
	<p>アカウント ID とポリシーキーを使用して Brightcove プレイバックサービスを定義する変数を作成します。これは、最初に呼び出されたときに初期化されます。</p>

	<p>スウィフトを初めて使用する場合は、<a href="https://docs.swift.org/swift-book/LanguageGuide/Properties.html">レイジーストアードプロパティに関するガイドを確認してください</a>。</p>

	<pre class="line-numbers" data-start="20">
<code class="language-swift" translate="No">lazy var playbackService: BCOVPlaybackService = {
  return BCOVPlaybackService(accountId: playbackConfig.accountID, policyKey: playbackConfig.policyKey)
}()</code></pre>
	</li>
</ol>

<h4>再生コントローラを作成する</h4>

<ol class="bcls-tasklist">
	<li>
	<p>Brightcoveの再生コントローラを定義する変数を作成します。これは、最初に呼び出されたときに作成されます。</p>

	<ul>
		<li>
		<p>28-30行：デリゲートを設定し、自動アドバンスと自動再生機能をオンにします。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="24">
<code class="language-swift" translate="No">lazy var playbackController: BCOVPlaybackController? = {
  guard let _playbackController = BCOVPlayerSDKManager.shared().createPlaybackController() else {
    return nil
  }
  _playbackController.delegate = self
  _playbackController.isAutoAdvance = true
  _playbackController.isAutoPlay = true

  return _playbackController
}()</code></pre>
	</li>
</ol>

<h4>プレイヤービューを定義する</h4>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">createTVPlayerView</code>次の名前の関数を作成します。</p>

	<ul>
		<li>38-39行目:タブバーパネルが他のビューコントローラを表示できるように、プレーヤービューを定義します。</li>
		<li>42-44行目は次のとおりです。プレーヤービューを作成し、ビデオコンテナビューに追加します。</li>
		<li>47行目線:プレーヤービューを再生コントローラに関連付けます。</li>
		<li>49号線:プレーヤービューをメインビューのサブビューとして追加します。</li>
		<li>51号線:<a href="https://developer.apple.com/documentation/appkit/nsview/1526961-translatesautoresizingmaskintoco">自動サイズ変更マスクをオフにします</a>。</li>
		<li>
		<p>52-57行目線:<a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/index.html">自動レイアウトを使用して</a>、プレーヤービューの動的拘束を定義します。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="35">
<code class="language-swift" translate="No">lazy var playerView: BCOVTVPlayerView? = {
  // Set yourself as the presenting view controller
  // so that tab bar panels can present other view controllers
  let options = BCOVTVPlayerViewOptions()
  options.presentingViewController = self

  // Create and add to the video container view
  guard let _playerView = BCOVTVPlayerView(options: options) else {
    return nil
  }

  // Link the playback controller to the Player View
  _playerView.playbackController = playbackController

  videoContainerView.addSubview(_playerView)

  _playerView.translatesAutoresizingMaskIntoConstraints = false
  NSLayoutConstraint.activate([
    _playerView.topAnchor.constraint(equalTo: videoContainerView.topAnchor),
    _playerView.rightAnchor.constraint(equalTo: videoContainerView.rightAnchor),
    _playerView.leftAnchor.constraint(equalTo: videoContainerView.leftAnchor),
    _playerView.bottomAnchor.constraint(equalTo: videoContainerView.bottomAnchor)
  ])

  return _playerView
}()</code></pre>
	</li>
</ol>

<h4>init 関数を作成する</h4>

<ol class="bcls-tasklist">
	<li><code translate="No">init</code>次のように関数を作成します。

	<ul>
		<li>64行目です:init () 関数のスーパークラスの実装を呼び出します。</li>
		<li>
		<p>65行線:<strong>オプション:</strong>Video Cloud アカウント ID を分析に送信します。これは、<code translate="No">BCOVVideo</code>クラスをオーバーライドするか、Brightcove Playback サービスまたはカタログを使用しない場合にのみ必要です。</p>

		<aside class="bcls-aside bcls-aside--tip">Video Cloud Analyticsへのデータ送信の詳細については、<a href="/features/viewing-brightcove-analytics-player-sdks.html"> BrightcoveAnalyticsの使用</a>ガイド。</aside>
		</li>
	</ul>

	<pre class="line-numbers" data-start="62">
<code class="language-swift" translate="No">required init?(coder aDecoder: NSCoder)
{
  super.init(coder: aDecoder)
  playbackController?.analytics.account = playbackConfig.accountID;
}</code></pre>
	</li>
</ol>

<h4>ビューを読み込んだ後に処理する</h4>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">viewDidLoad</code>メソッドで以下を追加します。</p>

	<ul>
		<li>
		<p>72行目です:<code translate="No">requestContentFromPlaybackService</code>関数を呼び出します。この関数は次のステップで定義します。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="68">
<code class="language-swift" translate="No">override func viewDidLoad() {
  super.viewDidLoad()
  // Do any additional setup after loading the view, typically from a nib.

  requestContentFromPlaybackService()
}</code></pre>
	</li>
</ol>

<h4>Brightcoveライブラリからコンテンツをリクエストする</h4>

<p>ビデオコンテンツを再生するには、カタログサービスからプレイリストをリクエストします</p>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">requestContentFromPlaybackService</code>次の名前の関数を作成します。</p>

	<ul>
		<li>75-76行：指定されたビデオ ID に基づいて、再生 API からビデオオブジェクトを返します。</li>
		<li>80 行:再生コントローラにビデオを追加します。</li>
		<li>82 行目では、プレイリストが返されなかった場合にエラーメッセージを書き込みます。</li>
	</ul>

	<pre class="line-numbers" data-start="75">
<code class="language-swift" translate="No">private func requestContentFromPlaybackService() {
  playbackService.findVideo(withVideoID: playbackConfig.videoID, parameters: nil) { [weak self] (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

    if let _video = video {
      //  since "isAutoPlay" is true, setVideos will begin playing the content
      self?.playbackController?.setVideos([_video] as NSArray)
    } else {
      print("ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? "unknown error")")
    }
  }
}</code></pre>
	</li>
</ol>

<h4>再生コントローラを拡張する</h4>

<p>これにより、アプリがビデオ再生イベントをリッスンして応答できるようになります。</p>

<ol class="bcls-tasklist">
	<li>
	<p>ビューコントローラを拡張して Brightcove 再生コントローラデリゲートを含めて、再生イベントをリッスンします。Swift を初めて使用する場合は、<a href="https://docs.swift.org/swift-book/LanguageGuide/Extensions.html">拡張機能に関するガイドを確認してください</a>。</p>

	<pre class="line-numbers" data-start="88">
<code class="language-swift" translate="No">// MARK: - BCOVPlaybackControllerDelegate
extension ViewController: BCOVPlaybackControllerDelegate {

  func playbackController(_ controller: BCOVPlaybackController!, didAdvanceTo session: BCOVPlaybackSession!) {
    NSLog("ViewController Debug - Advanced to new session.")
  }

  func playbackController(_ controller: BCOVPlaybackController!, playbackSession session: BCOVPlaybackSession!, didReceive lifecycleEvent: BCOVPlaybackSessionLifecycleEvent!) {
    NSLog("Event: %@", lifecycleEvent.eventType)
  }
}</code></pre>
	</li>
</ol>

<h4>残り</h4>

<ol class="bcls-tasklist">
	<li>
	<p>古いバージョンの tvOS のフォーカスの上書きを処理する関数を作成します。</p>

	<pre class="line-numbers" data-start="100">
<code class="language-swift" translate="No">// MARK: - UIFocusEnvironment overrides
extension ViewController {

  // Focus Environment override for tvOS 9
  override var preferredFocusedView: UIView? {
      return playerView
  }

  // Focus Environment override for tvOS 10+
  override var preferredFocusEnvironments: [UIFocusEnvironment] {
      return (playerView != nil ? [ playerView! ] : [])
  }
}</code></pre>
	</li>
</ol>

<h4 id="viewController">コードを見る</h4>

<p>これで、ビューコントローラが完成しました。ここに完全なコードがあります：</p>

<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">//
//  ViewController.swift
//  Simple-Video-Playback
//
//  Copyright © 2018 Brightcove. All rights reserved.
//

import UIKit
import BrightcovePlayerSDK

fileprivate struct playbackConfig {
  static let policyKey = "<span class="bcls-input">your policy key</span>"
  static let accountID = "<span class="bcls-input">your account id</span>"
  static let videoID = "<span class="bcls-input">your video id</span>"
}

class ViewController: UIViewController {
  @IBOutlet weak var videoContainerView: UIView!

  lazy var playbackService: BCOVPlaybackService = {
      return BCOVPlaybackService(accountId: playbackConfig.accountID, policyKey: playbackConfig.policyKey)
  }()

  lazy var playbackController: BCOVPlaybackController? = {
      guard let _playbackController = BCOVPlayerSDKManager.shared().createPlaybackController() else {
        return nil
      }
      _playbackController.delegate = self
      _playbackController.isAutoAdvance = true
      _playbackController.isAutoPlay = true

      return _playbackController
  }()

  lazy var playerView: BCOVTVPlayerView? = {
    // Set yourself as the presenting view controller
    // so that tab bar panels can present other view controllers
    let options = BCOVTVPlayerViewOptions()
    options.presentingViewController = self

    // Create and add to the video container view
    guard let _playerView = BCOVTVPlayerView(options: options) else {
      return nil
    }

    // Link the playback controller to the Player View
    _playerView.playbackController = playbackController

    videoContainerView.addSubview(_playerView)

    _playerView.translatesAutoresizingMaskIntoConstraints = false
    NSLayoutConstraint.activate([
      _playerView.topAnchor.constraint(equalTo: videoContainerView.topAnchor),
      _playerView.rightAnchor.constraint(equalTo: videoContainerView.rightAnchor),
      _playerView.leftAnchor.constraint(equalTo: videoContainerView.leftAnchor),
      _playerView.bottomAnchor.constraint(equalTo: videoContainerView.bottomAnchor)
    ])

    return _playerView
  }()

  required init?(coder aDecoder: NSCoder)
  {
    super.init(coder: aDecoder)
    playbackController?.analytics.account = playbackConfig.accountID; // Optional
  }

  override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view, typically from a nib.

    requestContentFromPlaybackService()
  }

  private func requestContentFromPlaybackService() {
    playbackService.findVideo(withVideoID: playbackConfig.videoID, parameters: nil) { [weak self] (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

      if let _video = video {
        //  since "isAutoPlay" is true, setVideos will begin playing the content
        self?.playbackController?.setVideos([_video] as NSArray)
      } else {
        print("ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? "unknown error")")
      }
    }
  }
}

// MARK: - BCOVPlaybackControllerDelegate
extension ViewController: BCOVPlaybackControllerDelegate {

  func playbackController(_ controller: BCOVPlaybackController!, didAdvanceTo session: BCOVPlaybackSession!) {
    NSLog("ViewController Debug - Advanced to new session.")
  }

  func playbackController(_ controller: BCOVPlaybackController!, playbackSession session: BCOVPlaybackSession!, didReceive lifecycleEvent: BCOVPlaybackSessionLifecycleEvent!) {
    NSLog("Event: %@", lifecycleEvent.eventType)
  }
}

// MARK: - UIFocusEnvironment overrides
extension ViewController {

  // Focus Environment override for tvOS 9
  override var preferredFocusedView: UIView? {
    return playerView
  }

  // Focus Environment override for tvOS 10+
  override var preferredFocusEnvironments: [UIFocusEnvironment] {
    return (playerView != nil ? [ playerView! ] : [])
  }
}</code></pre>
</div>
<!--end class="video-cloud-only"--><!--begin class="player-only"-->

<div class="player-only">
<h4>ネイティブ SDK のインポート</h4>

<p>iOS 用 Brightcove ネイティブプレーヤー SDK は Obj-C で書かれていますが、フレームワークモジュールを Swift プロジェクトにインポートするだけです。</p>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">import</code>既存のディレクティブの下に以下を追加して、Brightcove ネイティブプレーヤー SDK をインポートします。</p>

	<pre class="line-numbers" data-start="9">
<code class="language-swift" translate="No">import BrightcovePlayerSDK</code></pre>
	</li>
</ol>

<h4>あなたの価値でプロジェクトをカスタマイズする</h4>

<p>Video Cloud アカウント ID の値を追加します。</p>

<pre class="line-numbers" data-start="11">
<code class="language-swift" translate="No">fileprivate struct playbackConfig {
    static let accountID = "<span class="bcls-input">your account id</span>"
}</code></pre>

<ol class="bcls-tasklist">
</ol>

<h4>ビュー変数を作成する</h4>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">ViewController</code>クラスで、ビューの変数を追加します。</p>

	<pre class="line-numbers" data-start="15">
<code class="language-swift" translate="No">class ViewController: UIViewController {
  @IBOutlet weak var videoContainerView: UIView!</code></pre>
	</li>
</ol>

<h4>再生コントローラを作成する</h4>

<ol class="bcls-tasklist">
	<li>
	<p>Brightcoveの再生コントローラを定義する変数を作成します。これは、最初に呼び出されたときに作成されます。</p>

	<ul>
		<li>
		<p>22-24 行:デリゲートを設定し、自動アドバンスと自動再生機能をオンにします。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="18">
<code class="language-swift" translate="No">lazy var playbackController: BCOVPlaybackController? = {
  guard let _playbackController = BCOVPlayerSDKManager.shared().createPlaybackController() else {
    return nil
  }
  _playbackController.delegate = self
  _playbackController.isAutoAdvance = true
  _playbackController.isAutoPlay = true

  return _playbackController
}()</code></pre>
	</li>
</ol>

<h4>プレイヤービューを定義する</h4>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">playerView</code>次のように作成します。</p>

	<ul>
		<li>32～33行目線:タブバーパネルが他のビューコントローラを表示できるように、プレーヤービューを定義します。</li>
		<li>36～38行目は次のとおりです。プレーヤービューを作成し、ビデオコンテナビューに追加します。</li>
		<li>41行目:プレーヤービューを再生コントローラに関連付けます。</li>
		<li>43行目線:プレーヤービューをメインビューのサブビューとして追加します。</li>
		<li>45行目線:<a href="https://developer.apple.com/documentation/appkit/nsview/1526961-translatesautoresizingmaskintoco">自動サイズ変更マスクをオフにします</a>。</li>
		<li>
		<p>46〜51行目は次のとおりです。<a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/index.html">自動レイアウトを使用して</a>、プレーヤービューの動的拘束を定義します。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="29">
<code class="language-swift" translate="No">lazy var playerView: BCOVTVPlayerView? = {
  // Set yourself as the presenting view controller
  // so that tab bar panels can present other view controllers
  let options = BCOVTVPlayerViewOptions()
  options.presentingViewController = self

  // Create and add to the video container view
  guard let _playerView = BCOVTVPlayerView(options: options) else {
    return nil
  }

  // Link the playback controller to the Player View
  _playerView.playbackController = playbackController

  videoContainerView.addSubview(_playerView)

  _playerView.translatesAutoresizingMaskIntoConstraints = false
  NSLayoutConstraint.activate([
    _playerView.topAnchor.constraint(equalTo: videoContainerView.topAnchor),
    _playerView.rightAnchor.constraint(equalTo: videoContainerView.rightAnchor),
    _playerView.leftAnchor.constraint(equalTo: videoContainerView.leftAnchor),
    _playerView.bottomAnchor.constraint(equalTo: videoContainerView.bottomAnchor)
  ])

  return _playerView
}()</code></pre>
	</li>
</ol>

<h4>init 関数を作成する</h4>

<ol class="bcls-tasklist">
	<li><code translate="No">init</code>次のように関数を作成します。

	<ul>
		<li>58行線:init () 関数のスーパークラスの実装を呼び出します。</li>
		<li>
		<p>59行:Video Cloud アカウント ID を分析に送信します。これにより、アプリがBrightcoveに登録されます。</p>

		<aside class="bcls-aside bcls-aside--tip">Video Cloud Analyticsへのデータ送信の詳細については、<a href="/features/viewing-brightcove-analytics-player-sdks.html"> BrightcoveAnalyticsの使用</a>ガイド。</aside>
		</li>
	</ul>

	<pre class="line-numbers" data-start="56">
<code class="language-swift" translate="No">required init?(coder aDecoder: NSCoder)
{
  super.init(coder: aDecoder)
  playbackController?.analytics.account = playbackConfig.accountID;
}</code></pre>
	</li>
</ol>

<h4>動画を再生する</h4>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">viewDidLoad</code>メソッドで以下を追加します。</p>

	<ul>
		<li>67-69行目は次のとおりです。URL パスを使用してビデオソースの配列を作成します。</li>
		<li>
		<p>71 行目では、ビデオ配列をコントローラの再生キューに追加します。このキューは、自動的に再生を開始するように設定されています。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="62">
<code class="language-swift" translate="No">override func viewDidLoad() {
  super.viewDidLoad()
  // Do any additional setup after loading the view, typically from a nib.

  // create an array of videos
  var videoArray = [AnyObject]()
  videoArray = [videoWithURL(url: NSURL(string: "https://learning-services-media.brightcove.com/videos/hls/laughing_gull/laughing_gull.m3u8")!),
                videoWithURL(url: NSURL(string: "https://learning-services-media.brightcove.com/videos/hls/greatblueheron/greatblueheron.m3u8")!)]

  playbackController?.setVideos(videoArray as NSFastEnumeration);
}</code></pre>
	</li>
</ol>

<h4>動画ソースの配信方法を設定する</h4>

<ol class="bcls-tasklist">
	<li>
	<p><code translate="No">BCOVSources</code>動画に属する配信方法を設定する関数を作成します。</p>

	<pre class="line-numbers" data-start="74">
<code class="language-swift" translate="No">func videoWithURL(url: NSURL) -&gt; BCOVVideo {
    // set the delivery method for BCOVSources that belong to a video
    let source:BCOVSource = BCOVSource(url: url as URL?, deliveryMethod: kBCOVSourceDeliveryHLS, properties: nil)
    let video = BCOVVideo.init(source: source, cuePoints: BCOVCuePointCollection.init(array: []), properties: [NSObject:AnyObject]())
    return video!
}</code></pre>
	</li>
</ol>

<h4>再生コントローラを拡張する</h4>

<p>これにより、アプリがビデオ再生イベントをリッスンして応答できるようになります。</p>

<ol class="bcls-tasklist">
	<li>
	<p>ビューコントローラを拡張して Brightcove 再生コントローラデリゲートを含めて、再生イベントをリッスンします。Swift を初めて使用する場合は、<a href="https://docs.swift.org/swift-book/LanguageGuide/Extensions.html">拡張機能に関するガイドを確認してください</a>。</p>

	<pre class="line-numbers" data-start="82">
<code class="language-swift" translate="No">// MARK: - BCOVPlaybackControllerDelegate
extension ViewController: BCOVPlaybackControllerDelegate {

  func playbackController(_ controller: BCOVPlaybackController!, didAdvanceTo session: BCOVPlaybackSession!) {
    NSLog("ViewController Debug - Advanced to new session.")
  }

  func playbackController(_ controller: BCOVPlaybackController!, playbackSession session: BCOVPlaybackSession!, didReceive lifecycleEvent: BCOVPlaybackSessionLifecycleEvent!) {
    NSLog("Event: %@", lifecycleEvent.eventType)
  }
}</code></pre>
	</li>
</ol>

<h4>残り</h4>

<ol class="bcls-tasklist">
	<li>
	<p>古いバージョンの tvOS のフォーカスの上書きを処理する関数を作成します。</p>

	<pre class="line-numbers" data-start="94">
<code class="language-swift" translate="No">// MARK: - UIFocusEnvironment overrides
extension ViewController {

  // Focus Environment override for tvOS 9
  override var preferredFocusedView: UIView? {
      return playerView
  }

  // Focus Environment override for tvOS 10+
  override var preferredFocusEnvironments: [UIFocusEnvironment] {
      return (playerView != nil ? [ playerView! ] : [])
  }
}</code></pre>
	</li>
</ol>

<h4 id="viewControllerPerform">コードを見る</h4>

<p>これで、ビューコントローラが完成しました。ここに完全なコードがあります：</p>

<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">//
//  ViewController.swift
//  Simple-Video-Playback
//
//  Copyright © 2018 Brightcove. All rights reserved.
//

import UIKit
import BrightcovePlayerSDK

fileprivate struct playbackConfig {
  static let accountID = "1752604059001"
}

class ViewController: UIViewController {
  @IBOutlet weak var videoContainerView: UIView!

  lazy var playbackController: BCOVPlaybackController? = {
    guard let _playbackController = BCOVPlayerSDKManager.shared().createPlaybackController() else {
      return nil
    }
    _playbackController.delegate = self
    _playbackController.isAutoAdvance = true
    _playbackController.isAutoPlay = true

    return _playbackController
  }()

  lazy var playerView: BCOVTVPlayerView? = {
    // Set yourself as the presenting view controller
    // so that tab bar panels can present other view controllers
    let options = BCOVTVPlayerViewOptions()
    options.presentingViewController = self

    // Create and add to the video container view
    guard let _playerView = BCOVTVPlayerView(options: options) else {
      return nil
    }

    // Link the playback controller to the Player View
    _playerView.playbackController = playbackController

    videoContainerView.addSubview(_playerView)

    _playerView.translatesAutoresizingMaskIntoConstraints = false
    NSLayoutConstraint.activate([
      _playerView.topAnchor.constraint(equalTo: videoContainerView.topAnchor),
      _playerView.rightAnchor.constraint(equalTo: videoContainerView.rightAnchor),
      _playerView.leftAnchor.constraint(equalTo: videoContainerView.leftAnchor),
      _playerView.bottomAnchor.constraint(equalTo: videoContainerView.bottomAnchor)
    ])

    return _playerView
  }()

  required init?(coder aDecoder: NSCoder)
  {
    super.init(coder: aDecoder)
    playbackController?.analytics.account = playbackConfig.accountID;
  }

  override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view, typically from a nib.

    // create an array of videos
    var videoArray = [AnyObject]()
    videoArray = [videoWithURL(url: NSURL(string: "https://learning-services-media.brightcove.com/videos/hls/laughing_gull/laughing_gull.m3u8")!),
        videoWithURL(url: NSURL(string: "https://learning-services-media.brightcove.com/videos/hls/greatblueheron/greatblueheron.m3u8")!)]

    playbackController?.setVideos(videoArray as NSFastEnumeration);
  }

  func videoWithURL(url: NSURL) -&gt; BCOVVideo {
    // set the delivery method for BCOVSources that belong to a video
    let source:BCOVSource = BCOVSource(url: url as URL?, deliveryMethod: kBCOVSourceDeliveryHLS, properties: nil)
    let video = BCOVVideo.init(source: source, cuePoints: BCOVCuePointCollection.init(array: []), properties: [NSObject:AnyObject]())
    return video!
  }
}

// MARK: - BCOVPlaybackControllerDelegate
extension ViewController: BCOVPlaybackControllerDelegate {

  func playbackController(_ controller: BCOVPlaybackController!, didAdvanceTo session: BCOVPlaybackSession!) {
    NSLog("ViewController Debug - Advanced to new session.")
  }

  func playbackController(_ controller: BCOVPlaybackController!, playbackSession session: BCOVPlaybackSession!, didReceive lifecycleEvent: BCOVPlaybackSessionLifecycleEvent!) {
    NSLog("Event: %@", lifecycleEvent.eventType)
  }
}

// MARK: - UIFocusEnvironment overrides
extension ViewController {

  // Focus Environment override for tvOS 9
  override var preferredFocusedView: UIView? {
    return playerView
  }

  // Focus Environment override for tvOS 10+
  override var preferredFocusEnvironments: [UIFocusEnvironment] {
    return (playerView != nil ? [ playerView! ] : [])
  }
}</code></pre>
</div>
<!--class="player-only"--></section>
<!--id="Code_the_video_app"-->

<section class="bcls-section" id="&gt;Connect_the_storyboard_view">
<h2>ストーリーボードビューを接続する</h2>

<p>接続します<code translate="No">Main.storyboard</code>で表示<code translate="No">videoContainer</code>プロパティ。</p>

<ol class="bcls-tasklist">
	<li>
	<p>Xcodeで、<code translate="No">Main.storyboard</code>ファイルを開きます。</p>
	</li>
	<li>
	<p>コンパニオンビューで、<strong>ビューコントローラシーンを展開し</strong>、[ <strong>ビューコントローラ</strong> ] メニューを展開し、<strong> View </strong>オブジェクトを公開します。</p>

	<figure class="bcls-figure"><img class="bcls-image" alt="Storyboard view" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/tvos/getting-started/quick-start-swift/storyboard-view.png" />
	<figcaption class="bcls-caption--image">ストーリーボードビュー</figcaption>
	</figure>
	</li>
	<li>
	<p>アシスタントエディタを表示し、<code translate="No">ViewController.swift</code>ファイルを開きます。</p>

	<figure class="bcls-figure"><img class="bcls-image" alt="Assistant editor" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/tvos/getting-started/quick-start-swift/assistant-editor.png" />
	<figcaption class="bcls-caption--image">アシスタントエディタ</figcaption>
	</figure>
	</li>
	<li>
	<p><code translate="No">@IBOutlet</code>の隣にある開いた円を選択し<code translate="No">videoContainerView</code>、それを<strong> View</strong>オブジェクトにドラッグしてこれらのコンポーネントを接続します。</p>

	<figure class="bcls-figure"><img class="bcls-image" alt="Connect the view" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/tvos/getting-started/quick-start-swift/connect-view.png" />
	<figcaption class="bcls-caption--image">ビューを接続する</figcaption>
	</figure>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Manage_Media_Security">メディアセキュリティの管理</h2>

<p>アプリトランスポートセキュリティ (ATS) は、アプリと Web サービスの間の安全な接続を強制します。Apple の iOS 9 SDK のリリースで、<a href="https://developer.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/"> App Transport Security (ATS) </a>と呼ばれる新機能が追加されました。</p>

<ol class="bcls-tasklist">
	<li>
	<p>アプリには、次のいずれかの状況が適用されます。</p>

	<ul>
		<li>
		<p>デフォルトでは、iOS 用 Brightcove ネイティブ SDK はソース選択ポリシーを使用して HTTP ソース上で HTTPS を選択するため、ATS を有効にしてアプリを構築できます。</p>

		<p>それで、あなたはあなたのアプリを実行する準備ができています。</p>
		</li>
		<br />
		<li>
		<p>HTTP ソースを使用している場合や、アプリで他の HTTP 呼び出しがある場合、次のエラーメッセージが表示されることがあります。</p>

		<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure.
Temporary exceptions can be configured via your app's Info.plist file.</code></pre>

		<p>つまり、ATS は有効ですが、システムが ATS 要件を満たすように構成されていません。この状況を修正するには、<a href="/ios/framework/working-app-transport-security-ats.html">アプリトランスポートセキュリティ (ATS) を使用する</a>」ドキュメントを参照してください。</p>
		</li>
	</ul>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Run_the_app">アプリを実行する</h2>

<div>
<p>アプリは、Apple TV または Xcode シミュレータでビルドして実行する準備ができました。リモコンを使用して、指定されたビデオを再生してナビゲートできるはずです。</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Apple TV sample" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/tvos/getting-started/quick-start-swift/apple-tv.png" />
<figcaption class="bcls-caption--image">アップルテレビのサンプル</figcaption>
</figure>
</div>
</section>

<section class="bcls-section">
<h2 id="Run_the_app">アップルのテレビのUIコントロール</h2>

<p>これで、ビデオ情報、字幕、オーディオのトップバー表示など、Apple TV の再生コントロールについてもっと学ぶ準備ができました。詳細については、「<a href="/tvos/playback/apple-tv-ui-controls-native-sdk-tvos.html"> tvOS 用のネイティブ SDK を使用する Apple TV UI コントロール</a>」を参照してください。</p>

<p>独自のカスタムトップバー項目ビューの作成方法の詳細については、<a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/AppleTV/swift"> Apple TV Player のサンプルを参照してください</a>。</p>
</section>
</article>