---
title: 'Android用ネイティブSDKを使用したビデオビューのサイズ変更' 
description: このトピックでは、内側のビデオビューをサイズ変更/拡大して、<code translate="No">BrightcoveVideoView</code> Android用ネイティブSDKを使用する場合。
parent: Framework 
grandparent: Androidの開発
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概要</h2>
<p>開発者は、ビデオビューでのビデオの表示方法のデフォルトの動作を変更できます。内側のビデオビュー ( <code translate="No">SurfaceView</code> / <code translate="No">TextureView</code> ) のサイズを変更/ストレッチして () <code translate="No">BrightcoveVideoView</code>を塗りつぶすことができます。<code translate="No">FrameLayout</code>これを行うには、<code translate="No">EventType.VIDEO_SIZE_KNOWN</code>イベントをリッスンし、いくつかの数学を行い、表示値を設定します。</p>
<p>ビデオ表示を変更するには、次の 2 つの方法があります。</p>
<ul>
  <li>
    <a href="#Resizing_the_container">コンテナのサイズ変更 ( <code translate="No">BaseVideoView</code> / <code translate="No">FrameLayout</code> ) </a>
  </li>
  <li>
    <a href="#Resizing_the_video">ビデオのサイズを変更する（<code translate="No">SurfaceView</code>）</a>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_container">コンテナのサイズを変更する</h2>
<p>ポートレートモードでデバイス画面全体に合うようにビデオ表示を設定するアプリを開発することもできます。これを行うには、コンテナ ( <code translate="No">BaseVideoView</code> / <code translate="No">FrameLayout</code> ) のサイズを変更します。</p>
<aside class="bcls-aside bcls-aside--information">なぜなら<code translate="No">Video</code>高さは最初は不明ですが、親ビューのサイズと一致します（画面全体<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSampleApp/src/main">BasicSampleApp</a>） まで<code translate="No">VIDEO_SIZE_KNOWN</code>イベントがトリガーされます。次に、<code translate="No">BaseVideoView</code>はをラップします<code translate="No">SurfaceView</code>。コンテナのサイズを変更すると、最初のちらつきが見られる場合があります。</aside>

<h3>コンテナプロパティを設定する</h3>
<p>動画の周囲に黒い余白が表示される場合は、<code translate="No">BrightcoveVideoView</code><code translate="No">layout-height</code>。</p>
<ol class="bcls-tasklist">
    <li>XML <strong>レイアウトファイルを開きます</strong>。</li>
    <li><code translate="No">BrightcoveVideoView layout-height</code>をに設定します<code translate="No">wrap_content</code>。</li>
    <li>上記の注で説明したように、最初のちらつきが発生することがあります。</li>
</ol>

<h3>ビデオビューのサイズを設定する</h3>
<p>ビデオビューを制御するもう 1 つの方法は、プログラムを使用してサイズを設定することです。</p>
<ol class="bcls-tasklist-restart">
    <li>最初のちらつきを最小限に抑えるには、<code translate="No">layout_height</code>を特定の値（280dp など）に設定してみてください。目標は、設定された高さが計算された高さに近づくことです。</li>
    <li><code translate="No">EventType.VIDEO_SIZE_KNOWN</code>イベントを聞いて。</li>
    <li><code translate="No">Event.VIDEO_WIDTH</code>とを取得<code translate="No">Event.VIDEO_HEIGHT</code></li>
    <li>これらの値を使用して、アスペクト比を決定します。</li>
    <li>縦横比を使用して、ディスプレイの幅と高さを計算します。</li>
</ol>
<p>このソリューションは次のようになります。</p>
<pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the layout params
    brightcoveVideoView.setLayoutParams(new FrameLayout.LayoutParams(videoWidth,videoHeight));
  }
});
</code></pre>
<p>ビューを追加するときは、レイアウトパラメータを上書きする必要があります。詳細については、<a href="/android/framework/android-adding-viewmanaging-layout.html"> Androidを参照してください：ビュー/管理レイアウトドキュメントを追加します</a>。</p>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_video">ビデオのサイズを変更する</h2>
<p>画面いっぱいにダブルタップを実装することもできます。これは、16:9 のビデオを取り、18:9 または 19:9 デバイスで画面いっぱいに表示されます。</p>
<p>これは、実際のビデオのサイズを変更することによって行うことができます（<code translate="No">SurfaceView</code>）。</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        デバイスのディスプレイのサイズに合わせて幅と高さをに設定した場合、画面全体に合わせてビデオのサイズが変更されます。<code translate="No">renderView</code>
      </p>
      <aside class="bcls-aside bcls-aside--information">これは実際のビデオを引き伸ばすことはありません。次のステップでそれを行います。</aside>
      <pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the video size
    brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
    </li>
    <li>
      <p>
        以下のコードは、その親（<code translate="No">SurfaceView</code>）と一致するように基になるビデオビュー<code translate="No">BaseVideoView</code>（例えば<code translate="No">FrameLayout</code>）を更新します。覚えておいておくべきことはいくつかあります。
      </p>
      <ul>
        <li>
          フルスクリーンに出入りするとき、およびデバイスを回転するときは、<code translate="No">VIDEO_SIZE_KNOWN</code>イベントを聴く必要があります。
        </li>
        <li>
          上記の条件で、ビューを更新するタイミングを決定する必要があります。
        </li>
      </ul>
  <p>1つのシナリオは、<code translate="No">BaseVideoView layout_height</code>に<code translate="No">280dp</code>次に、サイズを変更します<code translate="No">SurfaceView</code>合わせる<code translate="No">280dp</code>。縦横比はわずかに変更されます。ユーザーがポートレートモードで全画面表示になり、<code translate="No">updateVideoViewMatchToParent()</code>が呼び出されたら、両方<code translate="No">BaseVideoView</code>そして<code translate="No">SurfaceView</code>デバイスのディスプレイがいっぱいになり、ビデオのアスペクト比がわずかに変更されます。</p>
<pre class="line-numbers">
<code class="language-java" translate="No">public void updateVideoViewMatchToParent(@NonNull BaseVideoView brightcoveVideoView) {
  RenderView renderView = brightcoveVideoView.getRenderView();
  if (renderView != null) {
      renderView.setVideoSize(brightcoveVideoView.getWidth(), brightcoveVideoView.getHeight());
  }
}
</code></pre>
<p>ダブルタップを検出するには、<a href="https://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener"> GestureDetector.ondoubletapListener </a>インターフェイスを使用できます。詳細については、<a href="https://developer.android.com/training/gestures/detector">一般的なジェスチャーを検出するドキュメントを参照してください</a>。</p>
    </li>
</ol>
<p>縦横比を考慮せずに（ビデオをトリミングせずに）ビデオをストレッチする場合は、これを試すことができます：</p>
<pre class="line-numbers">
<code class="language-java" translate="No">eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
      //Get the display metrics
      DisplayMetrics metrics = new DisplayMetrics();
      getWindowManager().getDefaultDisplay().getMetrics(metrics);

      int videoHeight = metrics.heightPixels;
      int videoWidth = metrics.widthPixels;
      brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
<aside class="bcls-aside bcls-aside--information">重要なのは<code translate="No">BaseVideoView</code>使用<code translate="No">match_parent</code>両方のための<code translate="No">layout_width</code>と<code translate="No">layout_height</code>のために<code translate="No">SurfaceView</code>デバイスのディスプレイを埋めます。</aside>

<p>取得する値は、デバイスの向きによって影響を受けることに注意してください。縦向きと横の両方のビデオを引き伸ばすには、次の操作を実行する必要があります。</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        <code translate="No">Activity</code>次の項目を上書きします。
      </p> 
      <pre>
<code class="language-java" translate="No">public void onConfigurationChanged(Configuration configuration)</code>
</pre>
    </li>
    <li>ビデオサイズをリセットします。</li>
</ol>
</section>

</article>