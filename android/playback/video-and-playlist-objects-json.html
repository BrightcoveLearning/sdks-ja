---
title: 'JSONからのビデオおよびプレイリストオブジェクト' 
description: このトピックでは、必要なJSON形式のデータを使用してBrightcove Native SDK for Androidのヘルパーメソッドを呼び出して、再生可能なビデオオブジェクトとプレイリストオブジェクトを作成する方法を学習します。
parent: Playback 
grandparent: Androidの開発
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  
<section class="bcls-section">
<h2 id="Overview">概要</h2>

<p>バージョン 6.2.0 以降では、Android 版 Brightcove ネイティブ SDK では、JSON オブジェクトから動画および再生リストオブジェクトを作成するメソッドがサポートされています。</p>

<p>これは、サーバー側のプロキシを使用して、Brightcove アカウントから動画と再生リストのデータを取得する場合に便利です。この方法では、アプリのクライアント側にポリシーキーを公開しません。</p>

<p>再生可能なビデオおよび再生リストオブジェクトを作成するには、次の操作を行います。</p>

<ol class="bcls-tasklist">
	<li>オプション:サーバー側で Playback API を呼び出して、動画またはプレイリストのデータを返します。</li>
	<li>以下の必須フィールドに基づいて、JSON 形式のオブジェクトを作成します。</li>
	<li>JSON 形式のオブジェクトを渡し、適切なメソッドを呼び出して、次のものを作成します。
	<ul>
		<li><a href="#Video_objects">ビデオオブジェクト</a></li>
		<li><a href="#Playlist_objects">プレイリストオブジェクト</a></li>
	</ul>
	</li>
	<li>返された動画またはプレイリストをプレーヤーにロードします。</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Video_objects">ビデオオブジェクト</h2>

<p>ビデオオブジェクトを作成するには、<code translate="No">buildVideoFromJSON()</code>次の情報をメソッドに渡します。</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>フィールド</th>
			<th>説明</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">account_id</code></td>
			<td>動画に関連付けられたアカウント ID</td>
		</tr>
		<tr>
			<td><code translate="No">id</code></td>
			<td>動画ID</td>
		</tr>
		<tr>
			<td><code translate="No">sources</code></td>
			<td>ビデオソースの JSON 配列。配列内の各ソースには、次のものが必要です。
			<ul>
				<li>コンテンツへの有効なURLを持つsrcフィールド</li>
				<li>HLS または DASH コンテンツの場合、コンテンツの MIME タイプを持つタイプフィールド</li>
				<li>MP4 コンテンツの場合、値<strong> MP4 </strong>のオブジェクトフィールド</li>
			</ul>
			</td>
		</tr>
		<tr>
			<td><code translate="No">duration</code></td>
			<td>ビデオの再生時間 (ミリ秒)</td>
		</tr>
	</tbody>
</table>
<br/>

<p>サーバー側プロキシがビデオデータを返す場合は、上記の表で指定された値を使用して JSON オブジェクト文字列を作成します。</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "account_id": "3636334163001",
  "sources": [
  {
    "src": "http://f1.media.brightcove.com/4/36356334163001/3636334163001_3637454559001_Cascada-Teaser.mp4",
    "container": "MP4"
  }, {
    "type": "application/x-mpegURL",
    "src": "http://c.brightcove.com/services/mobile/streaming/index/master.m3u8"
  }],
  "id": "3637780364001",
  "duration": 74700
}</code></pre>
<br/>

<p>JSON 文字列を JSON オブジェクトに変換し、<code translate="No">buildVideoFromJSON()</code>メソッドに渡します。</p>

<pre class="line-numbers">
<code class="language-java" translate="No">try {
   JSONObject jsonObject = new JSONObject(response);
   Video video = VideoParser.buildVideoFromJSON(jsonObject, eventEmitter);
  } catch (JSONException e) {
    e.printStackTrace();
  } catch (VideoParseException e) {
    e.printStackTrace();
  }</code></pre>
</section>

<section class="bcls-section">
<h2 id="Playlist_objects">プレイリストオブジェクト</h2>

<p>プレイリストオブジェクトを作成するには、<code translate="No">buildPlaylistFromJSON()</code>次の情報をメソッドに渡します。</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>フィールド</th>
			<th>説明</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">account_id</code></td>
			<td>動画に関連付けられたアカウント ID</td>
		</tr>
		<tr>
			<td><code translate="No">id</code></td>
			<td>動画ID</td>
		</tr>
		<tr>
			<td><code translate="No">videos</code></td>
			<td>ビデオオブジェクトの JSON 配列。これには、「<a href="#Video_objects"> Video objects </a>」セクションで説明されている必須フィールドが含まれます。</td>
		</tr>
		<tr>
			<td><code translate="No">duration</code></td>
			<td>ビデオの再生時間 (ミリ秒)</td>
		</tr>
	</tbody>
</table>
<br/>

<p>サーバー側プロキシがプレイリストデータを返したら、上記の表で指定された値を使用して JSON オブジェクト文字列を作成します。</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "id": "4970066630001",
  "account_id": "3636335163001",
  "name": "token auth playlist",
  "videos": [{
    "account_id": "3636335763001",
    "id": "4973773347001",
    "sources": [{
      "type": "application/dash+xml",
      "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/3636334163001/201606/1923/3636334163001_4973820156001_4973773237001.mpd"
    }],
    "duration": 29000
    },
    {
    "account_id": "3636334463001",
    "id": "4973766826001",
    "sources": [{
      "type": "application/dash+xml",
      "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/3636334163001/201606/2933/3636334163001_4973816542001_4973737826001.mpd"
    }],
    "duration": 29000
    }
  ]
}</code></pre>
<br/>

<p>JSON 文字列を JSON オブジェクトに変換し、<code translate="No">buildPlaylistFromJSON()</code>メソッドに渡します。</p>

<pre class="line-numbers">
<code class="language-java" translate="No">try {
   JSONObject jsonObject = new JSONObject(response);
   Playlist playlist = VideoParser.buildPlaylistFromJSON(jsonObject, eventEmitter);
  } catch (JSONException e) {
    e.printStackTrace();
  } catch (VideoParseException e) {
    e.printStackTrace();
  }</code></pre>
</section>

<section class="bcls-section">
<h2 id="Notes">注</h2>

<p>コンテンツが TTL（Time to Live）によって管理されており、長期間有効な動画オブジェクトを作成する場合は、そのオブジェクトが引き続き再生可能であることを確認する必要があります。これは、使用している CDN 上で設定されます。</p>
</section>
</article>