---
title: 'Android用ネイティブSDKを使用したHEVCの選択' 
description: このトピックでは、Brightcove Native SDK forAndroidがHEVCソースとレンディションを選択する方法を学習します。
parent: Playback 
grandparent: Androidの開発
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
<h2 id="Overview">概要</h2>
<p>
  High-Effiency Video Coding（HEVC）は、H.265とも呼ばれ、ビデオファイルサイズを縮小するビデオ圧縮規格で、より高品質な再生を可能にします。
</p>
<p>
  Android 版 Brightcove ネイティブ SDK では、次の HEVC 選択プロセスが使用されます。
</p>
<ol>
	<li><a href="#HEVC_source_selection">HEVC ソース選択</a></li>
  <li>
    <a href="#HEVC_rendition_selection">HEVC レンディションの選択</a>
  </li>
</ol>
<aside class="bcls-aside bcls-aside--information">
  <p>
    注意:
  </p>
  <ul>
    <li>
      Android 6.13.1 以降向けのBrightcoveネイティブ SDK でサポートされています
    </li>
    <li>
      APIレベル21（ロリポップバージョン5.0）以上を使用してAndroidデバイスで動作します
    </li>
  </ul>
</aside>
</section>

<section class="bcls-section">
<h2 id="HEVC_source_selection">HEVC ソース選択</h2>
<p>HEVC ソース選択プロセスは、<code translate="No">Catalog</code>Brightcoveを使用して動画を要求した後に開始されます。</p>
<p>
  アカウント設定によっては、HEVC レンディションの有無にかかわらず、<code translate="No">Catalog</code>応答に複数のソースが含まれる場合があります。例を次に示します。
</p>
<pre class="line-numbers"><code class="language-json" translate="No"> &quot;sources&quot;: [
  {
    &quot;type&quot;: &quot;application/dash+xml&quot;,
    &quot;src&quot;: &quot;http://manifest.prod.boltdns.net/manifest/v1/dash/live-baseurl/clear/4800266849001/11023209-08e4-40d4-9a8b-25aa659421e2/2s/manifest.mpd?fastly_token=ZYZ&quot;,
    &quot;profiles&quot;: &quot;urn:mpeg:dash:profile:isoff-live:2011&quot;
  },
  {
    &quot;type&quot;: &quot;application/dash+xml&quot;,
    &quot;src&quot;: &quot;https://manifest.prod.boltdns.net/manifest/v1/dash/live-baseurl/clear/4800266849001/11023209-08e4-40d4-9a8b-25aa659421e2/2s/manifest.mpd?fastly_token=XYZ&quot;,
    &quot;profiles&quot;: &quot;urn:mpeg:dash:profile:isoff-live:2011&quot;
  },
  {
    &quot;type&quot;: &quot;application/dash+xml&quot;,
    &quot;src&quot;: &quot;http://manifest.prod.boltdns.net/manifest/v2/dash/live-baseurl/clear/avc1_<span class="bcls-highlight">hvc1</span>_mp4a/4800266849001/11023209-08e4-40d4-9a8b-25aa659421e2/2s/manifest.mpd?fastly_token=XYZ&quot;,
    &quot;profiles&quot;: &quot;urn:mpeg:dash:profile:isoff-live:2011&quot;
  },
  {
    &quot;type&quot;: &quot;application/dash+xml&quot;,
    &quot;src&quot;: &quot;https://manifest.prod.boltdns.net/manifest/v2/dash/live-baseurl/clear/avc1_<span class="bcls-highlight">hvc1</span>_mp4a/4800266849001/11023209-08e4-40d4-9a8b-25aa659421e2/2s/manifest.mpd?fastly_token=XYZ&quot;,
    &quot;profiles&quot;: &quot;urn:mpeg:dash:profile:isoff-live:2011&quot;
  }
]</code></pre>
<p>
  この例では、次の 4 つの DASH ソースがあります。
</p>
<ul>
  <li>
    1つの非 HEVC HTTP ソース
  </li>
  <li>
    1つの非HEVCHTTPSソース
  </li>
  <li>
    1つのHEVC HTTPソース
  </li>
  <li>
    1つのHEVC HTTPSソース
  </li>
</ul>
<p>
  HEVC ソースには、URL <code translate="No">hvc</code>に文字列が含まれていることに注意してください。
</p>
<p>
  Android 用ネイティブ SDK ソースセレクタは HEVC ソースを好みます。上記の例では、HEVC HTTPS ソースを選択します。
</p>
<p>
  ネイティブ SDK は、<a href="https://support.brightcove.com/android-source-selection"> Android で定義されているデフォルトの選択プロセスを続行します。ソース選択ドキュメント</a> :
</p>
<ol>
  <li>
    HTTPよりHTTPSを優先する
  </li>
  <li>
    HLSよりDASHを好む
  </li>
  <li>
    再生する HLS を選択する場合は、利用可能な最高バージョンの HLS を優先します。
  </li>
</ol>

</section>

<section class="bcls-section">
<h2 id="HEVC_rendition_selection">HEVC レンディションの選択</h2>
<p>取り込みの設定によっては、HEVC ソースが異なるレンディションに含まれている場合があります。次のものがあるかもしれません。</p>
<ul>
  <li>
    <a href="#Only_HEVC_renditions">HEVC レンディションのみ</a>
  </li>
  <li>
    <a href="#A_mix_of_HEVC_and_other_codecs">HEVC と他のコーデックのミックス</a>
  </li>
</ul>
<aside class="bcls-aside bcls-aside--information">この種の選択は、ExoPlayerを使用する場合にのみ適用されます。</aside>

<h3 id="Only_HEVC_renditions">HEVC レンディションのみ</h3>
<p>
  ビデオソースのレンディションに HEVC コーデックしかない場合、レンディションの選択は行われません。ExoPlayer は、デバイスの機能と使用可能な帯域幅に応じて、適切なレンディションを選択します。
</p>

<h3 id="A_mix_of_HEVC_and_other_codecs">HEVC と他のコーデックのミックス</h3>
<p>
  ビデオソースに HEVC と他のコーデック（AVC など）が混在したレンディションがある場合、レンディション選択プロセスが呼び出されます。ネイティブ SDK がソースを ExoPlayer にロードすると、ビデオレンディションの<a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/trackselection/DefaultTrackSelector.SelectionOverride.html"> SelectionOverride が実行され、他のコーデックよりも HEVC が優先されます</a>。
</p>
<p>
  レンディションフォーマットがデバイスでサポートされているビデオの場合、レンディションプロセスは次のとおりです。
</p>
<ol>
  <li>
    ネイティブ SDK は、すべての HEVC レンディションを選択します。
  </li>
  <li>
    これは、同じ解像度で既存の HEVC を複製する HEVC 以外のレンディションを無視します。
  </li>
</ol>

<p>
  これにより、ほとんどの場合ExoPlayerがHEVCを好むことが強制されます。考えられるシナリオは 2 つあります。
</p>
<ul>
  <li>
    <a href="#Codec_mix_duplication">コーデックミックス複製</a>
  </li>
  <li>
    <a href="#Half_and_half">半分と半分</a>
  </li>
</ul>

<h4 id="Codec_mix_duplication">コーデックミックス複製</h4>
<p>
  このシナリオでは、HEVC および AVC コーデックの解像度がほとんど複製されます。例は次のとおりです。
</p>
<pre class="line-numbers"><code class="language-html" translate="No">AVC &lt;Representation bandwidth=&quot;453000&quot; height=&quot;270&quot; width=&quot;480&quot;&gt;
AVC &lt;Representation bandwidth=&quot;704000&quot; height=&quot;360&quot; width=&quot;640&quot;&gt;
AVC &lt;Representation bandwidth=&quot;903000&quot; height=&quot;360&quot; width=&quot;640&quot;&gt;
AVC &lt;Representation bandwidth=&quot;1202000&quot; height=&quot;540&quot; width=&quot;960&quot;&gt;
AVC &lt;Representation bandwidth=&quot;1989000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
AVC &lt;Representation bandwidth=&quot;2478000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
AVC &lt;Representation bandwidth=&quot;3458000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
AVC &lt;Representation bandwidth=&quot;3761000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
HVC &lt;Representation bandwidth=&quot;304000&quot; height=&quot;270&quot; width=&quot;480&quot;&gt;
HVC &lt;Representation bandwidth=&quot;548000&quot; height=&quot;360&quot; width=&quot;640&quot;&gt;
HVC &lt;Representation bandwidth=&quot;993000&quot; height=&quot;432&quot; width=&quot;768&quot;&gt;
HVC &lt;Representation bandwidth=&quot;1301000&quot; height=&quot;576&quot; width=&quot;1024&quot;&gt;
HVC &lt;Representation bandwidth=&quot;1605000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
HVC &lt;Representation bandwidth=&quot;2809000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
</code></pre>
<p>
  上記の動画レンディションを考慮すると、Brightcove Natvie SDK は次のレンディションを選択します。
</p>
<pre class="line-numbers"><code class="language-html" translate="No">AVC &lt;Representation bandwidth=&quot;1202000&quot; height=&quot;540&quot; width=&quot;960&quot;&gt;
HVC &lt;Representation bandwidth=&quot;304000&quot; height=&quot;270&quot; width=&quot;480&quot;&gt;
HVC &lt;Representation bandwidth=&quot;548000&quot; height=&quot;360&quot; width=&quot;640&quot;&gt;
HVC &lt;Representation bandwidth=&quot;993000&quot; height=&quot;432&quot; width=&quot;768&quot;&gt;
HVC &lt;Representation bandwidth=&quot;1301000&quot; height=&quot;576&quot; width=&quot;1024&quot;&gt;
HVC &lt;Representation bandwidth=&quot;1605000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
HVC &lt;Representation bandwidth=&quot;2809000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
</code></pre>
<p>
  AVC レンディションは既存の HEVC レンディションと重複しないため、AVC レンディションが 1 つだけ選択されていることに注意してください。
</p>

<h4 id="Half_and_half">半分と半分</h4>
<p>
  このシナリオでは、AVC コーデックを使用した低解像度のレンディションと、HVC コーデックを使用した高解像度のレンディションがあります。例は次のとおりです。
</p>
<pre class="line-numbers"><code class="language-html" translate="No">AVC &lt;Representation bandwidth=&quot;453000&quot; height=&quot;270&quot; width=&quot;480&quot;&gt;
AVC &lt;Representation bandwidth=&quot;704000&quot; height=&quot;360&quot; width=&quot;640&quot;&gt;
AVC &lt;Representation bandwidth=&quot;903000&quot; height=&quot;360&quot; width=&quot;640&quot;&gt;
AVC &lt;Representation bandwidth=&quot;1202000&quot; height=&quot;540&quot; width=&quot;960&quot;&gt;
AVC &lt;Representation bandwidth=&quot;3761000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
HVC &lt;Representation bandwidth=&quot;1301000&quot; height=&quot;576&quot; width=&quot;1024&quot;&gt;
HVC &lt;Representation bandwidth=&quot;1605000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
HVC &lt;Representation bandwidth=&quot;2809000&quot; height=&quot;720&quot; width=&quot;1280&quot;&gt;
</code></pre>
<p>
  この場合、HEVC レンディションを複製する解像度を持つ AVC コーデックがないため、ネイティブ SDK はすべてのレンディションを選択し、ExoPlayer が使用可能な帯域幅に基づいてレンディションを選択できます。
</p>
<p>
  Native SDK は、このシナリオのすべてのケースで HEVC 選択を強制しません。これは、最も低いレンディションを高ビットレートの HEVC レンディションにキャップすることを回避します。これにより、ネットワーク接続が悪いと、ユーザーエクスペリエンスが悪くなる可能性があります。
</p>
</section>

</article>