---
title: Androidデバイスでの再生速度の設定
description: このトピックでは、Brightcove Native SDK forAndroidを使用してアプリに可変速度再生機能を追加する方法を学習します。
parent: Playback 
grandparent: Androidの開発
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Introduction">はじめに</h2>

<p>一部のアプリでは、ユーザーがビデオを見ているときに再生速度を変更できる機能を提供したい場合があります（eラーニング環境など）。この機能は、Android用のネイティブSDKを使用して追加できます。</p>
<p>プレーヤーのアクティビティクラスでは、再生速度の目的のリストから選択するためのダイアログメニューを作成できます。</p>

</section>

<section class="bcls-section">
<h2 id="Implementation">実装</h2>

<p>Androidアプリに可変速度再生を追加するには、次の手順に従います。</p>
<ol class="bcls-tasklist">
  <li>
    <p>まず、速度を選択できるメニューを作成します。ここでは、<code translate="No">TextView</code>タップすると、速度値を含むメニューが開きます。その他のメニューオプションには、スピナーが含まれます。</p>
    <pre><code class="language-java" translate="No">private TextView playbackSpeed;</code></pre>
    <p>次に、を追加します<code translate="No">TextView</code>あなたに<code translate="No">Activity</code>レイアウト：</p>
    <pre class="line-numbers"><code class="language-java" translate="No">&lt;com.brightcove.player.view.BrightcoveExoPlayerVideoView
   android:id=&quot;@+id/brightcove_video_view&quot;
   android:layout_width=&quot;match_parent&quot;
   android:layout_height=&quot;280dp&quot;
   android:layout_gravity=&quot;center_horizontal|top&quot;/&gt;

&lt;LinearLayout
   android:layout_width=&quot;match_parent&quot;
   android:layout_height=&quot;wrap_content&quot;
   android:orientation=&quot;horizontal&quot;
   android:layout_gravity=&quot;center_vertical&quot;
   android:layout_below=&quot;@id/brightcove_video_view&quot;
   android:padding=&quot;20dp&quot;&gt;

   &lt;TextView
       android:id=&quot;@+id/playbackSpeed&quot;
       android:layout_width=&quot;match_parent&quot;
       android:layout_height=&quot;wrap_content&quot;
       android:gravity=&quot;end&quot;
       android:padding=&quot;20dp&quot;
       android:text=&quot;Change Speed&quot;
       android:textAlignment=&quot;textEnd&quot; /&gt;

&lt;/LinearLayout&gt;</code></pre>
  </li>
  <li>
    <p>プレーヤーに再生速度コントロールを追加します<code translate="No">Activity</code>：</p>
    <pre class="line-numbers"><code class="language-java" translate="No">playbackSpeed = (TextView) findViewById(R.id.playbackSpeed);
playbackSpeed.setVisibility(View.VISIBLE);</code></pre>
  </li>
  <li>
    <p>を設定します<code translate="No">onClick</code>のリスナー<code translate="No">TextView</code>：</p>
    <pre class="line-numbers"><code class="language-java" translate="No">playbackSpeed.setOnClickListener(new View.OnClickListener() {
   @Override
   public void onClick(View v) {
       showPlayerSpeedDialog();
   }
});
</code></pre>
  </li>
  <li>
    <p>プレーヤーの速度ダイアログを表示するメソッドを追加します。</p>
    <pre class="line-numbers"><code class="language-java" translate="No">private void showPlayerSpeedDialog() {
   String[] playerSpeedArrayLabels = {&quot;0.8x&quot;, &quot;1.0x&quot;, &quot;1.2x&quot;, &quot;1.5x&quot;, &quot;1.8x&quot;, &quot;2.0x&quot;};

   PopupMenu popupMenu = new PopupMenu(MainActivity.this, playbackSpeed);
   for (int i = 0; i &lt; playerSpeedArrayLabels.length; i++) {
       popupMenu.getMenu().add(i, i, i, playerSpeedArrayLabels[i]);
   }
   popupMenu.setOnMenuItemClickListener(item -&gt; {
       int id = item.getItemId();
       CharSequence itemTitle = item.getTitle();
       float playbackSpeed = Float.parseFloat(itemTitle.subSequence(0, 3).toString());
       changePlayerSpeed(playbackSpeed, itemTitle.subSequence(0, 3).toString());
       return false;
   });
   popupMenu.show();
}
</code></pre>
  </li>
  <li>
    <p>メニューから選択した値にプレーヤーの速度を変更するメソッドを追加します。さらに、このメソッドは、選択した値をのラベルに設定できます。<code translate="No">TextView</code>：</p>
    <pre class="line-numbers"><code class="language-java" translate="No">private void changePlayerSpeed(float speed, String speedLabel) {
   // Set playback speed
   ((ExoPlayerVideoDisplayComponent) brightcoveVideoView.getVideoDisplay()).getExoPlayer().setPlaybackParameters(new PlaybackParameters(speed, 1.0f));
   // Set playback speed label
   playbackSpeed.setText(&quot;Speed: &quot; + speedLabel + &quot;x&quot;);
}
</code></pre>
  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Handling_playback_problems">再生の問題の処理</h2>
<p>より高いまたはより低い再生速度の設定で問題が発生した場合は、以下に基づいて、再生速度コントロールを表示するかどうかを制限するか、使用可能な速度を制限することを検討してください。</p>

<ul>
  <li>
    <p>使用するOSレベル：</p>
    <pre><code class="language-java" translate="No">Build.VERSION_CODES.&lt;API_LEVEL&gt;</code></pre>
  </li>
  <li>
    <p>使用しているメーカー:(信頼性は保証されていません）</p>
    <pre><code class="language-java" translate="No">Build.MANUFACTURER
or
Build.BRAND
</code></pre>
  </li>
  <li>
    <p>次のブール値をチェックすることによるハードウェアプロファイル（TVまたは電話/モバイル）：</p>
    <pre><code class="language-java" translate="No">BrightcoveMediaController.checkTvMode(Context context)</code></pre>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Limitations">制約事項</h2>
<p>ExoPlayerとBrightcoveNative SDK for Androidを使用して再生速度を設定することは可能ですが、特定の再生速度を設定してもシームレスな視聴体験が提供されるとは限らないことに注意してください。</p>
<p>テストの結果、オーディオとビデオの品質を許容できないほど低下させることなく、古いOSバージョンや低スペックのデバイスでは処理できないほど高速な再生速度を設定できることが明らかになりました。</p>

<p>再生速度制御を実装する場合は、次のことを考慮することをお勧めします。</p>
<ul>
  <li>私のアプリケーションが対象としている最も古いAndroidOSレベルは何ですか？
    <ul>
      <li>古いOSは、通常よりも速いまたは遅い再生速度に対して適切なコーデックをサポートしていない可能性があります</li>
      <li>古いOSには、ビデオとオーディオのデータをパフォーマンスの高い方法で処理できない古いチップセットが搭載されている場合があります。</li>
    </ul>
  </li>
  <li>私のコンテンツはDRMで保護されていますか？ 
    <ul>
      <li>テストの結果、再生速度に関するDRM関連の問題がいくつか明らかになったため、通常よりも高速または低速で再生する場合の復号化の問題の可能性を排除したくありません。</li>
    </ul></li>
  <li>私のコンテンツはクローズドキャプションまたは複数のオーディオトラックを使用していますか？ 
    <ul>
      <li>特に古いデバイスやOSレベルでは、キャプションを有効または無効にしたり、キャプションを切り替えたりすることを検討する必要があります。</li>
    </ul></li>
</ul>
</section>

</article>