---
title: BrightcoveのIMAプラグイン6.15.0へ説明
description: このトピックでは、Android6.15.0のネイティブSDK用にBrightcoveのIMAプラグインを使用するようにアプリを移行する方法を学習します。
parent: Advertising 
grandparent: Androidの開発
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
<h2 id="Overview">概要</h2>
<p>Android 6.15.0 以降のBrightcoveネイティブ SDK では、Google IMA SDK バージョン 3.19.4 がサポートされています。IMA広告を使用している場合は、このバージョンのIMAプラグインを使用するために注意すべきことがいくつかあります。それらには次のものが含まれます。</p>
<ul>
  <li>
    <a href="#Changes_in_the_Google_IMA_SDK">グーグルIMA SDKの変更点</a>
  </li>
  <li>
     <a href="#Changes_in_the_Brightcove_IMA_plugin">Brightcove IMA プラグインの変更点</a>
  </li>
  <li>
     <a href="#Migrating_to_the_IMA_Plugin_6_15_0">IMA プラグインに移行する 6.15.0 &lt; /a
    </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changes_in_the_Google_IMA_SDK">グーグルIMA SDKの変更点</h2>
<p>
  Brightcoveのネイティブ SDK は Google IMA SDK をバージョン 3.11.2 からバージョン 3.19.4 に更新しました。最も関連性の高い変更は次のとおりです。
</p>
<ul>
  <li>
    <code translate="No">SdkFactory.createAdDisplayContainer()</code>非推奨です
  </li>
  <li>
    <code translate="No">AdDisplayContainer.setPlayer(VideoAdPlayer)</code>非推奨です
  </li>
  <li>
    <code translate="No">AdDisplayContainer.setAdContainer(ViewGroup)</code>非推奨です
  </li>
  <li>
    <code translate="No">AdsRequest.setAdDisplayContainer(AdDisplayContainer)</code>削除されました
  </li>
</ul>
<p>フルリリースについては、<a href="https://developers.google.com/interactive-media-ads/docs/sdks/android/client-side/history"> Google IMA Android SDKのリリース履歴ドキュメントを参照してください</a>。</p>
</section>

<section class="bcls-section">
<h2 id="Changes_in_the_Brightcove_IMA_plugin">Brightcove IMA プラグインの変更点</h2>
<p>
  Brightcove IMA プラグインは、新しい Google IMA SDK バージョンと完全に互換性を持たせるために、いくつかの変更を加えました。それらには次のものが含まれます。
</p>
<ul>
  <li>
    <a href="#Using_the_GoogleIMAComponent_Builder">GoogleimaCOMPONent ビルダーの使用</a>
  </li>
  <li>
     <a href="#Creating_the_AdDisplayContainer">adDisplayContainer の作成</a>
  </li>
  <li>
     <a href="#Deprecated_methods_in_GoogleIMAVideoAdPlayer">GoogleImaVideoadPlayer で廃止されたメソッド</a>
  </li>
</ul>

<h3 id="Using_the_GoogleIMAComponent_Builder">GoogleimaCOMPONent ビルダーの使用</h3>
<p><code translate="No">GoogleIMAComponent</code>ビルダーを使用してインスタンスを作成することをお勧めします。これにより、の設定が簡単になります<code translate="No">GoogleIMAComponent</code>。</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setUseAdRules(true)
  .setImaSdkSettings(customIMASDKSettings)
  .setAdsRenderingSettings(customAdsRenderingSettings)
  .setAdDisplayContainerFactory(customAdDisplayContainerFactory)
  .build();
}</code></pre>

<h3 id="Creating_the_AdDisplayContainer">adDisplayContainer の作成</h3>
<p>Google IMA SDK が削除されたため<code translate="No">AdsRequest.setAdDisplayContainer(...)</code>、Brightcove IMA <code translate="No">GoogleIMAVideoAdPlayer</code>プラグインはとを使用して、これを自動的に作成するようになりました<code translate="No">BaseVideoView</code>。</p>
<p><code translate="No">AdDisplayContainerFactory</code>プラグインを作成するには、が必要です<code translate="No">AdDisplayContainer</code>。</p>
<pre class="line-numbers"><code class="language-java" translate="No">public interface AdDisplayContainerFactory {
  /**
  * Creates the AdDisplayContainer with the provided GoogleIMAVideoAdPlayer
  * and the ViewGroup retrieved with getViewContainer()
  *
  * @param googleIMAVideoAdPlayer the Brightcove Ad Player for Google IMA
  */
  AdDisplayContainer createAdDisplayContainer(GoogleIMAVideoAdPlayer googleIMAVideoAdPlayer);

  /**
  * Returns the ViewGroup container used for both,
  * the creation of the GoogleIMAVideoAdPlayer and the AdDisplayContainer
  */
  ViewGroup getViewContainer();
}
</code></pre>
<p>ボンネットの下では、プラグインは<code translate="No">DefaultAdDisplayContainerFactory</code>、<code translate="No">AdDisplayContainerFactory</code>、を使用してを作成します<code translate="No">AdDisplayContainer</code>。は、<code translate="No">getViewContainer()</code><code translate="No">BaseVideoView</code>コンストラクタで渡されたを返し、<code translate="No">createAdDisplayContainer</code>メソッドは以下を返します。</p>

<pre><code class="language-java" translate="No">ImaSdkFactory.createAdDisplayContainer(getViewContainer(), googleIMAVideoAdPlayer);</code></pre>

<h4>addisplayContainerFactory</h4>
<p>別の実装が必要な場合は、<code translate="No">AdDisplayContainerFactory</code>独自の実装を<code translate="No">GoogleIMAComponent</code> Builder に渡す必要があります。</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setAdDisplayContainerFactory(customAdDisplayContainerFactory)
  .build();
</code></pre>

<p>以外の別のビューで広告を再生する場合は<code translate="No">BaseVideoView</code>、<code translate="No">DefaultAdDisplayContainerFactory</code>をに提供できます<code translate="No">ViewGroup</code>。</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setAdDisplayContainerFactory(new DefaultAdDisplayContainerFactory(myViewGroup))
  .build();
</code></pre>

<h3 id="Deprecated_methods_in_GoogleIMAVideoAdPlayer">GoogleImaVideoadPlayer で廃止されたメソッド</h3>
<p><code translate="No">GoogleIMAVideoAdPlayer</code>クラスでは、次のメソッドは非推奨です。</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <!-- <th style="width:10%">Deprecated</th> -->
      <th>非推奨のメソッド</th>
      <th style="text-align:center";>代わりに使って</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">playAd()</code></td>
      <td><code translate="No">playAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">loadAd(String)</code></td>
      <td><code translate="No">loadAd(AdMediaInfo, AdPodInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">stopAd()</code></td>
      <td><code translate="No">stopAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">resumeAd()</code></td>
      <td><code translate="No">playAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">pauseAd()</code></td>
      <td><code translate="No">pauseAd(AdMediaInfo)</code></td>
    </tr>
  </tbody>
</table>
<br/>
<p>置換方法では、必要なことに注意してください<code translate="No">AdMediaInfo</code>。を呼び出して、<code translate="No">AdMediaInfo</code>現在のオブジェクトを取得できます<code translate="No">GoogleIMAVideoAdPlayer.getCurrentAdMediaInfo()</code>。これは、ロードされた<code translate="No">AdMediaInfo</code>、またはを返します<code translate="No">Null</code>。</p>
</section>

<section class="bcls-section">
<h2 id="Migrating_to_the_IMA_Plugin_6_15_0">IMA プラグインへの移行 6.15.0</h2>
<p>
  Brightcove IMA プラグイン 6.15.0 に移行するには、次の手順に従います。
</p>
<ul>
  <li>
    <a href="#Update_dependency_versions">依存バージョンを更新する</a>
  </li>
  <li>
    <a href="#Remove_deprecated_methods">廃止されたメソッドを削除する</a>
  </li>
</ul>

<h3 id="Update_dependency_versions">依存バージョンを更新する</h3>
<p>アプリを更新して、次の依存関係バージョンを使用します。</p>
<ul>
  <li>
    Brightcove SDK の依存関係はすべてバージョン 6.15.0 に設定されています
  </li>
  <li>
    グーグルIMA SDKバージョン3.19.4を使用してください
  </li>
  <li>
    グーグルプレイサービスバージョン19.2.0を使用する
  </li>
</ul>
<p><strong>build.gradleファイルの例は次のとおりです</strong>。</p>
<pre class="line-numbers"><code class="language-java" translate="No">//build.gradle
dependencies {
 //Brightcove SDK dependencies
 implementation &quot;com.brightcove.player:android-sdk6.15.0:&quot;
 implementation &quot;com.brightcove.player:exoplayer2:6.15.0&quot;
 implementation &quot;com.brightcove.player:android-ima-plugin:6.15.0&quot;

 //Google IMA SDK
 implementation &quot;com.google.ads.interactivemedia.v3:interactivemedia:3.19.4&quot;

 //Google Play Services
 implementation &quot;com.google.android.gms:play-services-ads:19.2.0&quot;
 ...
}
</code></pre>

<h3 id="Remove_deprecated_methods">廃止されたメソッドを削除する</h3>
<p>現在の Google IMA の設定は次のようになります。</p>
<pre class="line-numbers"><code class="language-java" translate="No">AdDisplayContainer container = sdkFactory.createAdDisplayContainer();
container.setPlayer(googleIMAComponent.getVideoAdPlayer());
container.setAdContainer(brightcoveVideoView);
</code></pre>
<p>これら 3 つのメソッドは非推奨であり、消えます。</p>
<p><code translate="No">googleIMAComponent.getAdDisplayContainer()</code>ここで呼び出すと、<code translate="No">AdDisplayContainer</code>関連付けられた<code translate="No">GoogleIMAVideoAdPlayer</code>、または使用できない場合は null。</p>
<p>の作成の詳細については<code translate="No">AdDisplayContainer</code>、「<a href="#Creating_the_AdDisplayContainer"> adDisplayContainer の作成</a>」セクションを参照してください。</p>
<p>次のメソッドも Google IMA SDK から削除されました。</p>
<pre><code class="language-java" translate="No">adsRequest.setAdDisplayContainer(container);
</code></pre>
<p>代わりに、<code translate="No">AdDisplayContainer</code>を使用して Google IMA のインスタンスを作成します<code translate="No">AdsLoader</code>。</p>
<p>廃止されたメソッドとその置換の詳細については、<a href="#Deprecated_methods_in_GoogleIMAVideoAdPlayer"> GoogleImaVideoAdPlayer セクションの「非推奨のメソッド</a>」を参照してください。</p>
</section>

<section class="bcls-section">
<h2 id="More_information">詳細情報</h2>
<p>IMA の変更の詳細については、<a href="https://developers.google.com/interactive-media-ads/docs/sdks/android/client-side/history"> Google IMA Android SDK のリリース履歴のドキュメントを参照してください</a>。</p>
<p>関連する質問については、Brightcove SDK <a href="https://groups.google.com/g/brightcove-native-player-sdks">フォーラムを通じて、Brightcove SDK </a>チームにお問い合わせください。</p>
</section>

</article>