---
title: 'サーバーサイド広告挿入（SSAI）を使用したAndroid広告UIのカスタマイズ' 
description: このトピックでは、Brightcove Native SDK for AndroidのSSAIプラグインを使用して、サーバー側の広告再生中に表示されるUI要素を管理およびカスタマイズする方法を学習します。
parent: Advertising 
grandparent: Androidの開発
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概要</h2>

<p>サーバーサイド広告挿入（SSAI）を操作する場合、Android 版 Brightcove ネイティブ SDK を使用すると、広告 UI 要素をカスタマイズできます。SSAI の詳細については、以下を参照してください。</p>

<ul>
	<li><a href="/features/implementing-server-side-ads-native-player-sdks.html">ネイティブプレイヤー SDK を使用したサーバーサイド広告の実装</a></li>
</ul>

<p>アドバタイズメント UI は、次の 2 つの主要なコンポーネントで構成されています。</p>

<ul>
	<li>広告オーバーレイ (A)</li>
	<li>広告メディアコントローラー (B)</li>
</ul>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad UI components" src="/assets/images/android/ssai-ad-ui/ad-ui-components.png" />
<figcaption class="bcls-caption--image">広告UIコンポーネント</figcaption>
</figure>

<h3>広告オーバーレイ</h3>

<p>広告オーバーレイは、次のコンポーネントで構成されています。</p>

<ul>
	<li>広告ポッドの合計時間カウントダウン (A)</li>
	<li>詳しく見る (B)</li>
	<li>広告表示をスキップ (C)</li>
</ul>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad overlay" src="/assets/images/android/ssai-ad-ui/ad-overlay.png" />
<figcaption class="bcls-caption--image">広告オーバーレイ</figcaption>
</figure>

<aside class="bcls-aside bcls-aside--information">[広告をスキップ]ボタンは、VODサーバー側の広告挿入（SSAI）でのみサポートされています。現在、LiveSSAIではサポートされていません。</aside>

<h3>広告メディアコントローラー</h3>

<p>広告メディアコントローラは、左から右に次のコンポーネントで構成されています。</p>

<ul>
	<li>再生ボタン (A)</li>
	<li>広告番号カウントダウン (B)</li>
	<li>シングル広告期間のカウントダウン (C)</li>
	<li>全画面ボタン (D)</li>
</ul>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad media controller" src="/assets/images/android/ssai-ad-ui/ad-media-controller.png" />
<figcaption class="bcls-caption--image">広告メディアコントローラー</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="Managing_ad_UI_components">広告 UI コンポーネントの管理</h2>

<p>ビューから広告 UI コンポーネントを有効または無効にするには、以下を参照してください。</p>

<ul>
	<li><a href="#Modifying_the_VAST_document">VAST ドキュメントの変更</a></li>
	<li><a href="#Specifying_the_ad_configuration">広告設定の指定</a></li>
</ul>

<h3 id="Modifying_the_VAST_document">VAST ドキュメントの変更</h3>

<p>ザ・<strong>もっと詳しく知る</strong>そして<strong>広告をスキップ</strong>ビューは、VASTドキュメントの広告定義に基づいて表示または非表示にできます。</p>

<p>「<strong>詳細</strong>」ビューは、次に示すように、リニアクリエイティブに<code translate="No">ClickThrough</code> URL が含まれている場合にのみ表示されます。</p>

<pre class="line-numbers">
<code class="language-xml" translate="No"> &lt;VAST xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;Ad id="blue-01-5s"&gt;
    &lt;InLine&gt;
      ...
      &lt;Creatives&gt;
        &lt;Creative id="creative-01-5s"&gt;
          &lt;Linear&gt;
            ...
            &lt;VideoClicks&gt;
              <span class="bcls-highlight">&lt;ClickThrough id="clickthrough"&gt;https://www.brightcove.com/en/&lt;/ClickThrough&gt;</span>
              &lt;ClickTracking id="...”&gt;...&lt;/ClickTracking&gt;
            &lt;/VideoClicks&gt;
          &lt;/Linear&gt;
        &lt;/Creative&gt;
      &lt;/Creatives&gt;
    &lt;/InLine&gt;
  &lt;/Ad&gt;
&lt;/VAST&gt;
</code></pre>

<p><strong>広告をスキップ表示は</strong>、<code translate="No">skipoffset</code>リニアクリエイティブに有効な値がある場合にのみ表示されます。</p>

<pre class="line-numbers">
<code class="language-xml" translate="No"> &lt;VAST xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;Ad id="blue-01-5s"&gt;
    &lt;InLine&gt;
      ...
      &lt;Creatives&gt;
        &lt;Creative id="creative-01-5s"&gt;
          <span class="bcls-highlight">&lt;Linear skipoffset="00:00:03"&gt;</span>
            ...
          &lt;/Linear&gt;
        &lt;/Creative&gt;
      &lt;/Creatives&gt;
    &lt;/InLine&gt;
  &lt;/Ad&gt;
&lt;/VAST&gt;
</code></pre>

<h3 id="Specifying_the_ad_configuration">広告設定の指定</h3>

<p><a href="/features/using-player-enhancements-live-ssai-native-sdks.html#Create_an_ad_configuration">Live SSAI でプレーヤーの機能拡張を使用すると</a>、<code translate="No">application_ad_configuration</code>広告設定の内のコンポーネントを有効または無効にできます。<code translate="No">client_options</code>オブジェクトを使用すると、広告 UI コンポーネントのオンとオフを切り替えることができます。</p>

<aside class="bcls-aside bcls-aside--information">広告設定を使用して広告UIを変更することは、LiveSSAIにのみ適用されます。</aside>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "application_ad_configuration": {
	"ad_configuration_description": "$YOUR_DESCRIPTION",
	"ad_configuration_expected_response_type": "Vast",
	"ad_configuration_headers_for_impressions": false,
	"ad_configuration_strategy": "SingleAdResponse",
	"ad_configuration_transforms": [],
	"ad_configuration_url_format": "$YOUR_AD_SERVER",
     <span class="bcls-highlight">"ad_configuration_client_sdk_enabled": true,
     "client_options": {
        "show_ad_break_remaining_time": true / false,
        "show_ad_remaining_time": true / false,
        "show_number_of_remaining_ads": true / false,
        "client_only_tracking": true / false
     }</span>
  },
  "application_description": "$YOUR_DESCRIPTION"
}
</code></pre>

<aside class="bcls-aside bcls-aside--tip">使用している場合<code translate="No">client_options</code>コンポーネント、あなたが持っている必要があります<code translate="No">ad_configuration_client_sdk_enabled</code>に設定<code translate="No">true</code>。</aside>

<p>次のコンポーネントを有効または無効にするには、client_options オブジェクトを使用します。</p>

<ul>
	<li><code translate="No">Show_ad_break_remaining_time</code>:広告ポッドの合計時間のカウントダウン

	<ul>
		<li>例：<strong>15秒後に動画が再開されます</strong></li>
	</ul>
	</li>
	<li><code translate="No">Show_ad_remaining_time</code>:単一の広告期間のカウントダウン
	<ul>
		<li>例：<strong>( 0:15) </strong></li>
	</ul>
	</li>
	<li><code translate="No">Show_number_of_remaining_ads</code>:広告番号のカウントダウン
	<ul>
		<li>例：<strong>広告1/3の広告</strong><strong>、広告2の3など</strong></li>
	</ul>
	</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Customizing_the_Ad_Overlay">広告オーバーレイのカスタマイズ</h2>

<p>広告オーバーレイに関連付けられたビューとデフォルトのテキストをカスタマイズできます。</p>

<h3>ビューを修正する</h3>

<p>広告オーバーレイをカスタマイズするには、アプリの<strong> res </strong>フォルダーにある<strong> ssai_ad_overlay.xml </strong>レイアウトファイルのバージョンを置き換えます。このファイルには、次に示すように、いくつかの異なる独立したレイアウトが含まれています。</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad Overlay layouts" src="/assets/images/android/ssai-ad-ui/ad-overlay-layouts.png" />
<figcaption class="bcls-caption--image">広告オーバーレイのレイアウト</figcaption>
</figure>

<p>たとえば、<strong> ssai_ad_pod_duration_countdown_view.xml </strong>ファイルを更新することで、アドポッド期間ビューを上書きできます。<strong>ssai_ad_overlay.xml </strong>ファイルを置き換えることによって、広告オーバーレイビュー全体を上書きすることもできます。</p>

<p>このレイアウト構造により、旧バージョンの SSAI プラグインとの下位互換性を維持しながら、特定のコンポーネントをオーバーライドできます。</p>

<p>Android Studioを使用して広告オーバーレイファイルを調べます。Android 用ネイティブ SDK のバージョン 6.9.0 以降、SSAI プラグインの<strong> ssai_ad_overlay.xml </strong>は次のようになります。</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:background="@color/white"&gt;

   &lt;include layout="@layout/ssai_ad_countdown_and_learn_more_overlay"/&gt;
   &lt;include layout="@layout/ssai_ad_skip_overlay"/&gt;
&lt;/FrameLayout&gt;
</code></pre>

<p>コンポーネント xml ファイルを置き換える場合、意図しない結果を避けるために、を指定した元のビュー ID <code translate="No">TextView</code>でを使用する必要があります。詳細については、次の表を参照してください</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>コンポーネント名</th>
			<th>コンポーネント ID</th>
			<th>コンポーネントビュー</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>広告ポッド期間表示</td>
			<td><code translate="No">text_ad_countdown</code></td>
			<td><code translate="No">TextView</code></td>
		</tr>
		<tr>
			<td>詳細表示</td>
			<td><code translate="No">text_ad_learn_more</code></td>
			<td><code translate="No">TextView</code></td>
		</tr>
		<tr>
			<td>広告表示をスキップ</td>
			<td><code translate="No">text_ad_skip</code></td>
			<td><code translate="No">TextView</code></td>
		</tr>
	</tbody>
</table>

<h3>デフォルトテキストの変更</h3>

<p>広告オーバーレイコンポーネントはすべて、<code translate="No">TextViews</code>アプリの<strong> string.xml </strong>ファイルで定義されています。表示テキストを変更するには、を作成して上書きします<code translate="No">string</code>または<code translate="No">plurals</code> Android用ネイティブSDKで使用されるのと同じ文字列IDを使用するアイテム。</p>

<p><strong>広告ポッド期間ビューでは</strong>、次の文字列が使用されます。</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;plurals name="ssai_message_ad_break_duration_countdown"&gt;
   &lt;item quantity="one"&gt;Your video will resume in\n%1$d second&lt;/item&gt;
   &lt;item quantity="other"&gt;Your video will resume in\n%1$d seconds&lt;/item&gt;
&lt;/plurals&gt;
&lt;string name="ad_info_now_text"&gt;Your video will resume now&lt;/string&gt;
&lt;string name="ad_buffering_text"&gt;Your ad is buffering …&lt;/string&gt;
</code></pre>

<p><strong>詳細ビューでは</strong>、次の文字列が使用されます。</p>

<pre>
<code class="language-xml" translate="No">&lt;string name="ssai_message_learn_more"&gt;Learn More &gt;&gt; &lt;/string&gt;
</code></pre>

<p>[ <strong>広告をスキップ</strong> ] ビューでは、次の文字列が使用されます。</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;plurals name="you_can_skip_text"&gt;
   &lt;item quantity="one"&gt;You can skip this ad in\n%d second&lt;/item&gt;
   &lt;item quantity="other"&gt;You can skip this ad in\n%d seconds&lt;/item&gt;
&lt;/plurals&gt;
&lt;string name="skip_text"&gt;Skip Ad&lt;/string&gt;
</code></pre>
</section>

<section class="bcls-section">
<h2 id="Customizing_the_Ad_Media_Controller">広告メディアコントローラのカスタマイズ</h2>

<p>広告メディアコントローラーに関連付けられたビューと既定のテキストをカスタマイズできます。</p>

<h3>ビューを修正する</h3>

<p>広告メディアコントローラーをカスタマイズするには、アプリの<strong> res </strong>フォルダーにある<strong> default_ssai_ad_media_controller.xml </strong>レイアウトファイルのバージョンを置き換えます。</p>

<p>これは、SSAI プラグインで使用されるデフォルトのレイアウトを上書きします。広告が検出されるたびに、SSAI プラグインはこのレイアウトに切り替わり、広告が終了するとデフォルトのコントローラに戻ります。</p>

<p>独自のレイアウトで作業する場合は、意図しない結果を避けるために、最初に指定されたものと同じビュータイプとビュー ID を使用します。Android Studio を使用して、広告メディアコントローラーのレイアウトを調べます。SSAI プラグインバージョン 6.9.0 の場合、<strong> default_ssai_ad_media_controller.xml </strong>は次のようになります。</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;com.brightcove.player.mediacontroller.BrightcoveControlBar
   xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:id="@+id/brightcove_control_bar"
   style="@style/SSAIAdControlBar"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_gravity="bottom"
   android:background="@color/bmc_background"
   android:orientation="vertical"
   android:padding="8dp"&gt;

   &lt;LinearLayout
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:gravity="bottom"
       android:orientation="horizontal"&gt;

       &lt;Button style="@style/BorderlessButton"
           android:id="@id/play"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="@string/brightcove_controls_play"
           android:visibility="gone"
           tools:visibility="visible"/&gt;

       &lt;include layout="@layout/ssai_ad_number_countdown_view"/&gt;

       &lt;include layout="@layout/ssai_single_ad_duration_countdown_view"/&gt;

       &lt;View
           android:id="@id/two_line_spacer"
           android:layout_width="0dp"
           android:layout_height="0dp"
           android:layout_weight="1"
           android:visibility="gone"
           tools:visibility="visible"/&gt;

       &lt;Button style="@style/BorderlessButton"
           android:id="@id/full_screen"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:padding="4dp"
           android:text="@string/brightcove_controls_enter_full_screen"
           android:visibility="gone"
           tools:visibility="visible"/&gt;
   &lt;/LinearLayout&gt;

&lt;/com.brightcove.player.mediacontroller.BrightcoveControlBar&gt;
</code></pre>

<p>ここでは、SSAI 広告メディアコントローラーコンポーネントのビュータイプとビュー ID について説明します。</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>コンポーネント名</th>
			<th>コンポーネント ID</th>
			<th>コンポーネントビュー</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>[再生] ボタン</td>
			<td><code translate="No">play</code></td>
			<td>Button</td>
		</tr>
		<tr>
			<td>全画面表示ボタン</td>
			<td><code translate="No">full_screen</code></td>
			<td>Button</td>
		</tr>
		<tr>
			<td>広告番号のカウントダウン</td>
			<td><code translate="No">text_ad_number_countdown</code></td>
			<td>テキストビュー</td>
		</tr>
		<tr>
			<td>シングル広告期間のカウントダウン</td>
			<td><code translate="No">text_single_ad_duration_countdown</code></td>
			<td>テキストビュー</td>
		</tr>
	</tbody>
</table>

<p><a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-player-controls/CustomizedControlsSampleApp">カスタマイズコントロールサンプルアプリをチェックしてください</a>。ここでは、デフォルトのメディアコントローラをカスタマイズして新しいボタンを追加します。同じアプローチを適用して、SSAI 広告メディアコントローラーをカスタマイズできます。</p>

<h3>デフォルトテキストの変更</h3>

<p>広告メディアコントローラーコンポーネントはすべて、<code translate="No">TextViews</code>アプリの<strong> string.xml </strong>ファイルで定義されています。表示テキストを変更するには、を作成して上書きします<code translate="No">string</code>または<code translate="No">plurals</code> Android用ネイティブSDKで使用されるのと同じ文字列IDを使用するアイテム。</p>

<p><strong>広告番号のカウントダウンビューでは</strong>、次の文字列が使用されます。</p>

<pre>
<code class="language-xml" translate="No">&lt;string name="ssai_message_ad_number_countdown"&gt;Ad %1$d of %2$d&lt;/string&gt;
</code></pre>

<p><strong>シングル広告期間のカウントダウンビューでは</strong>、次の文字列が使用されます。</p>

<pre>
<code class="language-xml" translate="No">&lt;string name="ssai_message_ad_duration_countdown"&gt;(%1$s)&lt;/string&gt;
</code></pre>
</section>

<section class="bcls-section">
<h2 id="Summary">要約</h2>

<p>SSAI UI 要素をカスタマイズするには、いくつかのオプションがあります。複雑さのレベルは、達成したい内容によって異なります。複雑さの低いレベルから高いレベルまで、次のことが可能になります。</p>

<ul>
	<li>VAST 構成で特定のコンポーネントを構成/非表示にする</li>
	<li><code translate="No">client_options</code>広告設定でオブジェクトを使用してコンポーネントを表示/非表示にする（現時点では Live SSAI のみ）</li>
	<li>表示される文字列値を変更する</li>
	<li>UI レイアウトをオーバーライドする</li>
</ul>

<p><a href="https://groups.google.com/forum/#!forum/brightcove-native-player-sdks">Brightcoveのネイティブプレイヤー SDK フォーラムでアイデアやフィードバックを共有してください</a>。</p>
</section>
</article>